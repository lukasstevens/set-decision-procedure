<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Set_Proc</title>
</head>


<body>
<div class="head">
<h1>Theory Set_Proc</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Set_Proc.html"><span>Set_Proc</span></a><span>                
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Realisation.html"><span>Realisation</span></a><span> </span><a href="HF_Extras.html"><span>HF_Extras</span></a><span> </span><a href="Set_Calculus.html"><span>Set_Calculus</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>chapter</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A Decision Procedure for MLSS</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>This theory proves the soundness and completeness of the
</span><span>  tableau calculus defined in </span><span class="antiquoted"><span class="operator"><span>🗏</span></span><a href="Set_Calculus.html"><span>‹./Set_Calculus.thy›</span></a></span><span>
</span><span>  It then lifts those properties to a recursive procedure
</span><span>  that applies the rules of the calculus exhaustively.
</span><span>  To obtain a decision procedure, we also prove termination.</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Basic Definitions</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.lin_sat_def|fact"><span class="entity_def" id="Set_Proc.lin_sat_def|thm"><span class="entity_def" id="Set_Proc.lin_sat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.lin_sat|const"><span>lin_sat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_511..516">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lin_satD|fact"><span class="entity_def" id="Set_Proc.lin_satD|thm"><span>lin_satD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_511..516"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.not_lin_satD|fact"><span class="entity_def" id="Set_Proc.not_lin_satD|thm"><span>not_lin_satD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.sat_def|fact"><span class="entity_def" id="Set_Proc.sat_def|thm"><span class="entity_def" id="Set_Proc.sat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.sat|const"><span>sat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∄</span></span><span class="bound"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="bound"><span>bs'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_831..836">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.satD|fact"><span class="entity_def" id="Set_Proc.satD(2)|thm"><span class="entity_def" id="Set_Proc.satD(1)|thm"><span>satD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∄</span></span><span class="bound"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="bound"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_831..836"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                            
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.wits_def|fact"><span class="entity_def" id="Set_Proc.wits_def|thm"><span class="entity_def" id="Set_Proc.wits_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.wits|const"><span>wits</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wits</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.pwits_def|fact"><span class="entity_def" id="Set_Proc.pwits_def|thm"><span class="entity_def" id="Set_Proc.pwits_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.pwits|const"><span>pwits</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pwits</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>c</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
                  </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_singleton|fact"><span class="entity_def" id="Set_Proc.wits_singleton|thm"><span>wits_singleton</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwits_singleton|fact"><span class="entity_def" id="Set_Proc.pwits_singleton|thm"><span>pwits_singleton</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1395..1400">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwitsD|fact"><span class="entity_def" id="Set_Proc.pwitsD(3)|thm"><span class="entity_def" id="Set_Proc.pwitsD(2)|thm"><span class="entity_def" id="Set_Proc.pwitsD(1)|thm"><span>pwitsD</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_1395..1400"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1615..1620">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwitsI|fact"><span class="entity_def" id="Set_Proc.pwitsI|thm"><span>pwitsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_1615..1620"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_wits|fact"><span class="entity_def" id="Set_Proc.finite_wits|thm"><span>finite_wits</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_pwits|fact"><span class="entity_def" id="Set_Proc.finite_pwits|thm"><span>finite_pwits</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_wits|fact"><span>finite_wits</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_subterms_branch_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_subterms_branch_eq|thm"><span>lexpands_subterms_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span>
            </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span>
       </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> 
       </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3966..3967">6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3981..3982">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom|type"><span>pset_atom</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_3966..3967"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.induct|fact"><span>lexpands_eq.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span>
            </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_3981..3982"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_vars_branch_eq|thm"><span>lexpands_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_subterms_branch_eq|fact"><span>lexpands_subterms_branch_eq</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_eq_if_vars_branch_eq|fact"><span>subterms_branch_eq_if_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_subterms_branch_eq|thm"><span>bexpands_nowit_subterms_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4788..4789">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_4788..4789"><span>4</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4981..4982">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_4981..4982"><span>5</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_vars_branch_eq|thm"><span>bexpands_nowit_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span>bexpands_nowit_subterms_branch_eq</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_eq_if_vars_branch_eq|fact"><span>subterms_branch_eq_if_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_wits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_wits_eq|thm"><span>lexpands_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_vars_branch_eq|fact"><span>lexpands_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5572..5577">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_wits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_wits_eq|thm"><span>bexpands_nowit_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_vars_branch_eq|fact"><span>bexpands_nowit_vars_branch_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5572..5577"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5572..5577"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5776..5781">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_vars_branch_eq|thm"><span>bexpands_wit_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><a class="entity_ref" href="Set_Proc.html#offset_5776..5781"><span>assms</span></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6044..6049">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_wits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_wits_eq|thm"><span>bexpands_wit_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><a class="entity_ref" href="Set_Proc.html#offset_6044..6049"><span>assms</span></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_def|fact"><span>vars_branch_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6321..6326">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_pwits_subs|fact"><span class="entity_def" id="Set_Proc.lexpands_pwits_subs|thm"><span>lexpands_pwits_subs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6321..6326"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6321..6326"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>no_new_subterms›</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.no_new_subterms_def|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_def|thm"><span class="entity_def" id="Set_Proc.no_new_subterms_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
   </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6649..6654">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subtermsI|fact"><span class="entity_def" id="Set_Proc.no_new_subtermsI|thm"><span>no_new_subtermsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6649..6654"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6829..6834">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.Var_mem_subterms_branch_and_not_in_wits|fact"><span class="entity_def" id="Set_Proc.Var_mem_subterms_branch_and_not_in_wits|thm"><span>Var_mem_subterms_branch_and_not_in_wits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6829..6834"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.image_set_diff|fact"><span>image_set_diff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.image_UN|fact"><span>image_UN</span></a><span>
                 </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.Un_vars_term_subterms_branch_eq_vars_branch|fact"><span>Un_vars_term_subterms_branch_eq_vars_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7137..7142">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_cases|fact"><span class="entity_def" id="Set_Proc.subterms_branch_cases|thm"><span>subterms_branch_cases</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span>
    </span><span class="main"><span>(</span></span><span>Empty</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Union</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Inter</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Diff</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Single</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t1</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Var</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_7482..7485">Var</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7137..7142"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Var_mem_subterms_branch_and_not_in_wits|fact"><span>Var_mem_subterms_branch_and_not_in_wits</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageI|fact"><span>imageI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7482..7485"><span>Var</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7137..7142"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7137..7142"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7137..7142"><span>that</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7663..7668">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subterms_casesI|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_casesI|thm"><span>no_new_subterms_casesI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> Empty Union Inter Diff Single</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsI|fact"><span>no_new_subtermsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_8154..8160">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8154..8160"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7663..7668"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_cases|fact"><span>subterms_branch_cases</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_subs_subterms_fm|fact"><span>vars_fm_subs_subterms_fm</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8332..8337">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subtermsD|fact"><span class="entity_def" id="Set_Proc.no_new_subtermsD(5)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(4)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(3)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(1)|thm"><span>no_new_subtermsD</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8332..8337"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8782..8787">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.lexpands_no_new_subterms|thm"><span>lexpands_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8782..8787"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_subterms_branch_eq|fact"><span>lexpands_subterms_branch_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8782..8787"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9036..9041">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_subterms_atomI|fact"><span class="entity_def" id="Set_Proc.subterms_branch_subterms_atomI|thm"><span>subterms_branch_subterms_atomI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9036..9041"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.cases|fact"><span>subterms_atom.cases</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9346..9351">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_no_new_subterms|thm"><span>bexpands_nowit_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9346..9351"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span>bexpands_nowit_subterms_branch_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9346..9351"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9637..9642">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_no_new_subterms|thm"><span>bexpands_wit_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9637..9642"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span>
                   </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_trans|fact"><span>subterms_term_subterms_atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_fm_trans|fact"><span>subterms_term_subterms_fm_trans</span></a><span>
             </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span>
             </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_casesI|fact"><span>no_new_subterms_casesI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10071..10076">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_no_new_subterms|thm"><span>bexpands_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10071..10076"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.cases|fact"><span>bexpands.cases</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_no_new_subterms|fact"><span>bexpands_nowit_no_new_subterms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_no_new_subterms|fact"><span>bexpands_wit_no_new_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10344..10349">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.expandss_no_new_subterms|thm"><span>expandss_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10344..10349"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_new_subterms|fact"><span>lexpands_no_new_subterms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_new_subterms|fact"><span>bexpands_no_new_subterms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_subterms_fm_lastI|fact"><span class="entity_def" id="Set_Proc.subterms_branch_subterms_fm_lastI|thm"><span>subterms_branch_subterms_fm_lastI</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>wits_subterms›</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.wits_subterms_def|fact"><span class="entity_def" id="Set_Proc.wits_subterms_def|thm"><span class="entity_def" id="Set_Proc.wits_subterms_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.wits_subterms|const"><span>wits_subterms</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wits_subterms</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10904..10909">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_no_new_subterms|thm"><span>subterms_branch_eq_if_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><span>assms</span></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_11093..11098">simps</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10904..10909"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11093..11098"><span>simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_subs_subterms_fm|fact"><span>vars_fm_subs_subterms_fm</span></a><span>
                   </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span class="main"><span class="main"><span>]</span></span></span><span>
             </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_subterms_fm_lastI|fact"><span>subterms_branch_subterms_fm_lastI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_subterms_last_disjnt|fact"><span class="entity_def" id="Set_Proc.wits_subterms_last_disjnt|thm"><span>wits_subterms_last_disjnt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Completeness of the Calculus</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Proof of Lemma 2</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.is_literal.elims|fact"><span class="entity_def" id="Set_Proc.is_literal.induct|fact"><span class="entity_def" id="Set_Proc.is_literal.simps|fact"><span class="entity_def" id="Set_Proc.is_literal.pelims|fact"><span class="entity_def" id="Set_Proc.is_literal.cases|fact"><span class="entity_def" id="Set_Proc.is_literal.termination|fact"><span class="entity_def" id="Set_Proc.is_literal.pinduct|fact"><span class="entity_def" id="Set_Proc.is_literal.psimps|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.inducts|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.simps|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.induct|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.cases|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.intros|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.inducts|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.simps|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.induct|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.cases|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.intros|fact"><span class="entity_def" id="Set_Proc.is_literal.elims(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.elims(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.elims(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.induct|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(7)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(6)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(5)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(4)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.cases|thm"><span class="entity_def" id="Set_Proc.is_literal.termination|thm"><span class="entity_def" id="Set_Proc.is_literal.pinduct|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(7)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(6)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(5)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(4)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(1)|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.inducts|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.simps|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.induct|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.cases|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.inducts|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.simps|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.induct|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.cases|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(7)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(6)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(5)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(4)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(3)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(2)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(1)|thm"><span class="entity_def" id="Set_Proc.is_literal_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_rel_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_sumC_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_graph_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_dom|const"><span class="entity_def" id="Set_Proc.is_literal_rel|const"><span class="entity_def" id="Set_Proc.is_literal_sumC|const"><span class="entity_def" id="Set_Proc.is_literal_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.is_literal|const"><span>is_literal</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm|type"><span>fm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11751..11756">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.lexpands_no_wits_if_not_literal|thm"><span>lexpands_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11751..11756"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11751..11756"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11751..11756"><span>P_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12056..12061">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_no_wits_if_not_literal|thm"><span>bexpands_nowit_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12056..12061"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_def|fact"><span>Int_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12056..12061"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12389..12394">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_no_wits_if_not_literal|thm"><span>bexpands_wit_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12389..12394"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_def|fact"><span>Int_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12389..12394"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12724..12729">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_no_wits_if_not_literal|thm"><span>bexpands_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12724..12729"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>bs'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_cases|fact"><span>bexpands_cases</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_no_wits_if_not_literal|fact"><span>bexpands_wit_no_wits_if_not_literal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_no_wits_if_not_literal|fact"><span>bexpands_nowit_no_wits_if_not_literal</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12724..12729"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13085..13090">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.expandss_no_wits_if_not_literal|thm"><span>expandss_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13085..13090"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_wits_if_not_literal|fact"><span>lexpands_no_wits_if_not_literal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_wits_if_not_literal|fact"><span>bexpands_no_wits_if_not_literal</span></a><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13085..13090"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13472..13477">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_fm_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_fm_pwits_eq|thm"><span>lexpands_fm_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm|const"><span>lexpands_fm</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13472..13477"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_def|fact"><span>vars_branch_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13767..13772">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_un_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_un_pwits_eq|thm"><span>lexpands_un_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un|const"><span>lexpands_un</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14009..14013">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13767..13772"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14048..14052">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14009..14013"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13767..13772"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14048..14052"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14107..14111">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14107..14111"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14361..14366">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_int_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_int_pwits_eq|thm"><span>lexpands_int_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int|const"><span>lexpands_int</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14605..14609">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14361..14366"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14644..14648">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14605..14609"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14361..14366"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14644..14648"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14703..14707">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14703..14707"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14958..14963">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_diff_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_diff_pwits_eq|thm"><span>lexpands_diff_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff|const"><span>lexpands_diff</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15204..15208">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14958..14963"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15243..15247">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15204..15208"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14958..14963"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15243..15247"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15302..15306">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15302..15306"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15558..15563">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_pwits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_pwits_eq|thm"><span>bexpands_nowit_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15558..15563"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15558..15563"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15774..15778">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15774..15778"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15558..15563"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15558..15563"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16134..16139">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_pwits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_pwits_eq|thm"><span>bexpands_wit_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><span>assms</span></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16134..16139"><span>assms</span></a><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16408..16413">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2_lexpands|fact"><span class="entity_def" id="Set_Proc.lemma_2_lexpands|thm"><span>lemma_2_lexpands</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>assms</span></a><span class="main"><span>(</span></span><span>2-6</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16944..16945">1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16955..16959">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>t</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16955..16959"><span>that</span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_16944..16945"><span>1.prems</span></a><span>"</span></span><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16944..16945"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16955..16959"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_appendR|fact"><span>last_appendR</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_16944..16945"><span>1</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16944..16945"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_fm_pwits_eq|fact"><span>lexpands_fm_pwits_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17606..17607">2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_un_pwits_eq|fact"><span>lexpands_un_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_17606..17607"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17748..17749">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_17748..17749"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18268..18269">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_18268..18269"><span>5</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18827..18828">3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_int_pwits_eq|fact"><span>lexpands_int_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_18827..18828"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18971..18972">1</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_18971..18972"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19491..19492">6</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_19491..19492"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19784..19785">4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_diff_pwits_eq|fact"><span>lexpands_diff_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_19784..19785"><span>4</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19930..19931">1</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_19930..19931"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_20456..20457">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_20456..20457"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21082..21083">2</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_subterms_atomI|fact"><span>subterms_branch_subterms_atomI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21082..21083"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21082..21083"><span>2</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span>
               </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21675..21676">6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_new_subterms|fact"><span>lexpands_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21794..21796">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21794..21796"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21675..21676"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq_induct&apos;|fact"><span>lexpands_eq_induct'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21933..21938">subst</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22113..22114">1</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22113..22114"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22113..22114"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1'_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1'_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22113..22114"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22785..22786">2</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22785..22786"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22785..22786"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22785..22786"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23455..23456">3</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23455..23456"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23455..23456"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23455..23456"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21933..21938"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>neq</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16408..16413"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24231..24236">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2_bexpands|fact"><span class="entity_def" id="Set_Proc.lemma_2_bexpands|thm"><span>lemma_2_bexpands</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span>
                      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_new_subterms|fact"><span>bexpands_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>4</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_24761..24762">1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_24761..24762"><span>1</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_pwits_eq|fact"><span>bexpands_nowit_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_24761..24762"><span>1</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25170..25171">3</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25170..25171"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25424..25425">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25424..25425"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25678..25679">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25678..25679"><span>5</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25934..25935">2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><span>2</span></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff_not_equal|fact"><span>disjoint_iff_not_equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>not_in_pwits</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><span>2</span></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24231..24236"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_pwits_eq|fact"><span>bexpands_wit_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25934..25935"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?x</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> </span><span class="var"><span>?b</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26436..26441">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_wf_branch|thm"><span>subterms_branch_eq_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26436..26441"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_new_subterms|fact"><span>expandss_no_new_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26436..26441"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26956..26961">lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subterms_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_if_wf_branch|thm"><span>no_new_subterms_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_wits_if_not_literal_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.no_wits_if_not_literal_if_wf_branch|thm"><span>no_wits_if_not_literal_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26956..26961"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27279..27281">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_new_subterms|fact"><span>expandss_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_27279..27281"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_wits_if_not_literal|fact"><span>expandss_no_wits_if_not_literal</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27616..27621">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2|fact"><span class="entity_def" id="Set_Proc.lemma_2(3)|thm"><span class="entity_def" id="Set_Proc.lemma_2(2)|thm"><span class="entity_def" id="Set_Proc.lemma_2(1)|thm"><span>lemma_2</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27864..27868">have</span></span></span><span> </span><span class="entity_def" id="offset_27869..27891">no_wits_if_not_literal</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_wits_if_not_literal_if_wf_branch|fact"><span>no_wits_if_not_literal_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27864..27868"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28065..28069">have</span></span></span><span> </span><span class="entity_def" id="offset_28070..28085">no_new_subterms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_if_wf_branch|fact"><span>no_new_subterms_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28065..28069"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27616..27621"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_28451..28455">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_28457..28458">2</span><span> </span><span class="skolem"><span>b1</span></span><span> </span><span class="skolem"><span>b2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2_lexpands|fact"><span>lemma_2_lexpands</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28451..28455"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> _
        </span><a class="entity_ref" href="Set_Proc.html#offset_28070..28085"><span>no_new_subterms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28451..28455"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27869..27891"><span>no_wits_if_not_literal</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28451..28455"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28457..28458"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_28783..28784">3</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2_bexpands|fact"><span>lemma_2_bexpands</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28783..28784"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> _ _
        </span><a class="entity_ref" href="Set_Proc.html#offset_28070..28085"><span>no_new_subterms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28783..28784"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27869..27891"><span>no_wits_if_not_literal</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28783..28784"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28783..28784"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Realization of an Open Branch</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.base_vars_def|fact"><span class="entity_def" id="Set_Proc.base_vars_def|thm"><span class="entity_def" id="Set_Proc.base_vars_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.base_vars|const"><span>base_vars</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_base_vars|fact"><span class="entity_def" id="Set_Proc.finite_base_vars|thm"><span>finite_base_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_Un|fact"><span>finite_Un</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_pwits|fact"><span>finite_pwits</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwits_subs_base_vars|fact"><span class="entity_def" id="Set_Proc.pwits_subs_base_vars|thm"><span>pwits_subs_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_subs_vars|fact"><span class="entity_def" id="Set_Proc.base_vars_subs_vars|thm"><span>base_vars_subs_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.subterms&apos;_def|fact"><span class="entity_def" id="Set_Proc.subterms&apos;_def|thm"><span class="entity_def" id="Set_Proc.subterms&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.subterms&apos;|const"><span>subterms'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>subterms'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.bgraph_def|fact"><span class="entity_def" id="Set_Proc.bgraph_def|thm"><span class="entity_def" id="Set_Proc.bgraph_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.bgraph|const"><span>bgraph</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph|type"><span>pre_digraph</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bgraph</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span>
      </span><span class="bound"><span>vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>
    </span><span class="keyword1"><span>in</span></span><span>
      </span><span class="main"><span>⦇</span></span><span> verts </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>vs</span></span><span class="main"><span>,</span></span><span>
        arcs </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
        tail </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>,</span></span><span>
        head </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>⦈</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span class="entity_def" id="Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|thm"><span>base_vars_Un_subterms'_eq_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_base_vars_Un_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.finite_base_vars_Un_subterms&apos;|thm"><span>finite_base_vars_Un_subterms'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.verts_bgraph|fact"><span class="entity_def" id="Set_Proc.verts_bgraph|thm"><span>verts_bgraph</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.verts_bgraph_eq_subterms|fact"><span class="entity_def" id="Set_Proc.verts_bgraph_eq_subterms|thm"><span>verts_bgraph_eq_subterms</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.finite_subterms&apos;|thm"><span>finite_subterms'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_base_vars|fact"><span>finite_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_subterms&apos;_disjnt|fact"><span class="entity_def" id="Set_Proc.base_vars_subterms&apos;_disjnt|thm"><span>base_vars_subterms'_disjnt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30836..30841">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|thm"><span>wits_subterms_eq_base_vars_Un_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30836..30841"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31117..31122">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch(1)|thm"><span>in_subterms'_if_AT_mem_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31117..31122"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31433..31438">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch(1)|thm"><span>in_subterms'_if_AF_mem_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31433..31438"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31749..31754">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch(1)|thm"><span>in_subterms'_if_AT_eq_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31749..31754"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32063..32068">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch(1)|thm"><span>in_subterms'_if_AF_eq_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32063..32068"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32377..32382">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span class="entity_def" id="Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|thm"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.is_Var|const"><span>is_Var</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32377..32382"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.open_branch.intro|fact"><span class="entity_def" id="Set_Proc.open_branch_def|fact"><span class="entity_def" id="Set_Proc.open_branch.intro|thm"><span class="entity_def" id="Set_Proc.open_branch_def|thm"><span class="entity_def" id="Set_Proc.open_branch_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch|locale"><span class="entity_def" id="Set_Proc.open_branch|const"><span>open_branch</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.wf_branch|fact"><span class="entity_def" id="Set_Proc.open_branch.wf_branch|thm"><span class="entity_def" id="offset_32710..32719">wf_branch</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.bopen|fact"><span class="entity_def" id="Set_Proc.open_branch.bopen|thm"><span class="entity_def" id="offset_32739..32744">bopen</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.infinite_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.infinite_vars|thm"><span class="entity_def" id="offset_32766..32779">infinite_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32816..32825">sublocale</span></span></span><span> fin_digraph_bgraph</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.fin_digraph|locale"><span>fin_digraph</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_base_vars|fact"><span>finite_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.arcs|const"><span>arcs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>simproc</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_Collect</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_vimageI|fact"><span>finite_vimageI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a></a><span class="main"><span class="main"><span>]</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.member_seq_if_cas|fact"><span class="entity_def" id="Set_Proc.open_branch.member_seq_if_cas|thm"><span class="entity_def" id="offset_33257..33274">member_seq_if_cas</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cas</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>is</span></span><span> </span><span class="free"><span>t2</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>is</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>t1</span></span></span><span> </span><span class="quoted"><span class="free"><span>t2</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.member_cycle_if_cycle|fact"><span class="entity_def" id="Set_Proc.open_branch.member_cycle_if_cycle|thm"><span class="entity_def" id="offset_33439..33460">member_cycle_if_cycle</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="free"><span>c</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Arc_Walk.html#Arc_Walk.pre_digraph.cycle_def|fact"><span>pre_digraph.cycle_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33257..33274"><span>member_seq_if_cas</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> dag_bgraph</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.dag|locale"><span>dag</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_33724..33725">1</span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33724..33725"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.memberCycle|fact"><span>memberCycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_iff|fact"><span>empty_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.empty_set|fact"><span>empty_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetI|fact"><span>subsetI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>e1</span></span><span> </span><span class="skolem"><span>e2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="bound"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33439..33460"><span>member_cycle_if_cycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="skolem"><span>c</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.arcs|const"><span>arcs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32816..32825"><span>fin_digraph_bgraph.cycle_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Arc_Walk.html#Arc_Walk.pre_digraph.awalk_def|fact"><span>pre_digraph.awalk_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.memberCycle|fact"><span>memberCycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.open_branch.I_def|fact"><span class="entity_def" id="Set_Proc.open_branch.I_def|thm"><span class="entity_def" id="Set_Proc.open_branch.I_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.open_branch.I.cong|fact"><span class="entity_def" id="Set_Proc.open_branch.I.cong|thm"><span class="entity_def" id="Set_Proc.open_branch.I|const"><span class="entity_def" id="offset_34935..34936">I</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hf|type"><span>hf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
             </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_35078..35083">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.Ex_set_family|fact"><span class="entity_def" id="Set_Proc.Ex_set_family|thm"><span>Ex_set_family</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>I</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>I</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>I</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>P</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ip</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_35218..35220">ip</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.bij_betw|const"><span>bij_betw</span></a><span> </span><span class="skolem"><span>ip</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Countable_Set.html#Countable_Set.to_nat_on_finite|fact"><span>to_nat_on_finite</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.Ordinal.html#Ordinal.ord_of|const"><span>ord_of</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="skolem"><span>ip</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35218..35220"><span>ip</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="var"><span>?I</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.bij_betw_def|fact"><span>bij_betw_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?I</span></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_I|thm"><span class="entity_def" id="offset_35504..35512">inj_on_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.card_I|fact"><span class="entity_def" id="Set_Proc.open_branch.card_I|thm"><span class="entity_def" id="offset_35546..35552">card_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Ex_set_family|fact"><span>Ex_set_family</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_35760..35762">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_eq_Suc_le|fact"><span>less_eq_Suc_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35760..35762"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
       </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35078..35083"><span>I_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_base_vars_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_base_vars_I|thm"><span class="entity_def" id="offset_35951..35969">inj_on_base_vars_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_subterms&apos;_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_subterms&apos;_I|thm"><span>inj_on_subterms'_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35504..35512"><span>inj_on_I</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36325..36330">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_pwits|thm"><span class="entity_def" id="offset_36331..36353">not_dominated_if_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36325..36330"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36480..36482">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2|fact"><span>lemma_2</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36480..36482"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36480..36482"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36638..36643">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_pwits|thm"><span class="entity_def" id="offset_36644..36666">parents_empty_if_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36331..36353"><span>not_dominated_if_pwits</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36638..36643"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36803..36808">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_base_vars|thm"><span class="entity_def" id="offset_36809..36835">not_dominated_if_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36803..36808"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36331..36353"><span>not_dominated_if_pwits</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36966..36971">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_base_vars|thm"><span class="entity_def" id="offset_36972..36998">parents_empty_if_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36809..36835"><span>not_dominated_if_base_vars</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36966..36971"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37134..37148">interpretation</span></span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.realisation|locale"><span>realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subterms&apos;_disjnt|fact"><span>base_vars_subterms'_disjnt</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36809..36835"><span>not_dominated_if_base_vars</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="bound"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation|thm"><span class="entity_def" id="offset_37484..37495">realisation</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realisation_axioms</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.card_realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.card_realisation|thm"><span class="entity_def" id="offset_37524..37540">card_realisation</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_37636..37637">1</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HF_Extras.html#HF_Extras.hcard_HF|fact"><span>hcard_HF</span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.Zero_hf_def|fact"><span>Zero_hf_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36972..36998"><span>parents_empty_if_base_vars</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>fin_digraph_bgraph.finite_parents</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fin_digraph_bgraph.parents_subs_verts</span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_37636..37637"><span>1.hyps</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36809..36835"><span>not_dominated_if_base_vars</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_le_mono|fact"><span>add_le_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?B</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>{</span></span></span><span class="skolem"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>}</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37636..37637"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_37636..37637"><span>1.prems</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.semiring_numeral_class.mult_2|fact"><span>mult_2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_absorb|fact"><span>insert_absorb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_is_Un|fact"><span>insert_is_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HF_Extras.html#HF_Extras.hcard_HF|fact"><span>hcard_HF</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>finite_realisation_parents</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fin_digraph_bgraph.parents_subs_verts</span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><span>fin_digraph_bgraph.finite_verts</span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I_neq_realise|fact"><span class="entity_def" id="Set_Proc.open_branch.I_neq_realise|thm"><span class="entity_def" id="offset_39324..39337">I_neq_realise</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37134..37148"><span>realise</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37524..37540"><span>card_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35546..35552"><span>card_I</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_le|fact"><span>linorder_not_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39634..39643">sublocale</span></span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.realisation|locale"><span>realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a></span><span>
  </span><span class="keyword2"><span class="keyword"><span>rewrites</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span>realise</span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Trueprop|const"><span>Trueprop</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Trueprop|const"><span>Trueprop</span></a><span> </span><span class="bound"><span>P</span></span><span>"</span></span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37484..37495"><span>realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39324..39337"><span>I_neq_realise</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_pwits|thm"><span class="entity_def" id="offset_39915..39928">realise_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_subs_base_vars|fact"><span>pwits_subs_base_vars</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36644..36666"><span>parents_empty_if_pwits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I_in_realise_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.I_in_realise_if_base_vars|thm"><span class="entity_def" id="offset_40091..40116">I_in_realise_if_base_vars</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.refl_on_def|fact"><span>refl_on_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_40193..40198">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_neq_if_base_vars_and_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_neq_if_base_vars_and_subterms&apos;|thm"><span class="entity_def" id="offset_40199..40237">realise_neq_if_base_vars_and_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40193..40198"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39324..39337"><span>I_neq_realise</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40091..40116"><span>I_in_realise_if_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40193..40198"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_40467..40472">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD(1)|thm"><span>AT_mem_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40467..40472"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_40679..40684">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD(1)|thm"><span>AF_mem_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40679..40684"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_40891..40896">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD(1)|thm"><span>AT_eq_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40891..40896"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41101..41106">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD(1)|thm"><span class="entity_def" id="offset_41107..41134">AF_eq_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41101..41106"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41311..41316">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_mem|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_mem|thm"><span class="entity_def" id="offset_41317..41338">realisation_if_AT_mem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41311..41316"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41311..41316"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise.cases</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41717..41722">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_eq_urelems_subterms&apos;_cases|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_urelems_subterms&apos;_cases|thm"><span class="entity_def" id="offset_41723..41752">AT_eq_urelems_subterms'_cases</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="main"><span>(</span></span><span>subterms'</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41717..41722"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41717..41722"><a class="entity_ref" href="Set_Proc.html#offset_41717..41722"><span>assms</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2|fact"><span>lemma_2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41963..41968">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_eq|thm"><span class="entity_def" id="offset_41969..41989">realisation_if_AT_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41963..41968"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41723..41752"><span>AT_eq_urelems_subterms'_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_42175..42184">subterms'</span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42189..42193">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42189..42193"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hfset|const"><span>hfset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hfset|const"><span>hfset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF_hfset|fact"><span>HF_hfset</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
        </span><span class="entity_def" id="offset_42370..42371">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
           </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_42472..42477">s'_t'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42175..42184"><span>subterms'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42175..42184"><span>subterms'</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42370..42371"><span>a</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_42662..42663">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42175..42184"><span>subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dag_bgraph.adj_not_same</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42662..42663"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dag_bgraph.adj_not_same</span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42942..42944">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41963..41968"><a class="entity_ref" href="Set_Proc.html#offset_41963..41968"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42942..42944"><a class="entity_ref" href="Set_Proc.html#offset_42942..42944"><span>this</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42472..42477"><span>s'_t'</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43125..43127">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43125..43127"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42370..42371"><span>a</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43365..43370">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_base_vars_if_AF_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_base_vars_if_AF_eq|thm"><span class="entity_def" id="offset_43371..43397">realise_base_vars_if_AF_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43365..43370"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40199..40237"><span>realise_neq_if_base_vars_and_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_40091..40116"><span>I_in_realise_if_base_vars</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hempty_iff|fact"><span>hempty_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise.elims</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_43746..43750">True</span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43365..43370"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43746..43750"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_34935..34936"><span>I</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_onD|fact"><span>inj_onD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35951..35969"><span>inj_on_base_vars_I</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite.emptyI|fact"><span>finite.emptyI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_insert|fact"><span>finite_insert</span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hfset_HF|fact"><span>hfset_HF</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.the_elem_eq|fact"><span>the_elem_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43746..43750"><span>True</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39915..39928"><span>realise_pwits</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44027..44032">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.Ex_AT_eq_mem_subterms_last_if_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.open_branch.Ex_AT_eq_mem_subterms_last_if_subterms&apos;|thm"><span class="entity_def" id="offset_44033..44072">Ex_AT_eq_mem_subterms_last_if_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="free"><span>t'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_44321..44326">False</span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44027..44032"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44321..44326"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="main"><span>(</span></span><span>t_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t_wits</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_if_wf_branch|fact"><span>no_new_subterms_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.DiffI|fact"><span>DiffI</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_44636..44642">t_wits</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44636..44642"><span>t_wits</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_44780..44782">t'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41723..41752"><span>AT_eq_urelems_subterms'_cases</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>B_T_partition_verts</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44780..44782"><span>t'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44027..44032"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44027..44032"><span>assms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45148..45153">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_eq|thm"><span class="entity_def" id="offset_45154..45174">realisation_if_AF_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41107..41134"><span>AF_eq_branch_wits_subtermsD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45148..45153"><a class="entity_ref" href="Set_Proc.html#offset_45148..45153"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
    </span><span class="main"><span>(</span></span><span>t1_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span>(</span></span><span>t2_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span>(</span></span><span>subterms</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnE|fact"><span>UnE</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>t1_base_vars</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45148..45153"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43371..43397"><span>realise_base_vars_if_AF_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>t2_base_vars</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45148..45153"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43371..43397"><span>realise_base_vars_if_AF_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_45823..45831">subterms</span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_45836..45842">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span class="bound"><span>t1</span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span class="bound"><span>t2</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
                            </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_cartesian_product|fact"><span>finite_cartesian_product</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?h</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min|const"><span>min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>height</span></a><span> </span><span class="bound"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>height</span></a><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46297..46301">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_46357..46362">t1_t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_min_on|const"><span>arg_min_on</span></a><span> </span><span class="var"><span>?h</span></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surj_pair|fact"><span>surj_pair</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_if_finite|fact"><span>arg_min_if_finite</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46297..46301"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46357..46362"><span>t1_t2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46599..46603">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_min_on|const"><span>arg_min_on</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>S</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>S</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46599..46603"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46599..46603"><span>that</span></a><span>
          </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46779..46781">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_eqI|fact"><span>Min_eqI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_if_finite|fact"><span>arg_min_if_finite</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46599..46603"><span>that</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46779..46781"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46297..46301"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46357..46362"><span>t1_t2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_46975..46976">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_47113..47119">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_47134..47141">t1'_t2'</span><span class="main"><span>:</span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44033..44072"><span>Ex_AT_eq_mem_subterms_last_if_subterms'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_47431..47437">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_47601..47602">2</span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47601..47602"><span>2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_47893..47895">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47431..47437"><span>that</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_47893..47895"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_47601..47602"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41969..41989"><span>realisation_if_AT_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47601..47602"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47431..47437"><span>that</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>t1</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44033..44072"><span>Ex_AT_eq_mem_subterms_last_if_subterms'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_48180..48186">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2''</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_48352..48353">2</span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48352..48353"><span>2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>t1''</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48652..48654">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48180..48186"><span>that</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_48652..48654"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48352..48353"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41969..41989"><span>realisation_if_AT_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48352..48353"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48180..48186"><span>that</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>t2</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47113..47119"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_49096..49112">t1'_t2'_subterms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>lemma1_2</span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_conv|fact"><span>case_prod_conv</span></a><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32766..32779"><span>infinite_vars</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.ex_new_if_finite|fact"><span>ex_new_if_finite</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49454..49456">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.intros|fact"><span>bexpands_wit.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> _ _ _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_49454..49456"><span>this</span></a><span class="main"><span>]</span></span><span>
           </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
        </span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_iff|fact"><span>Diff_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_49830..49831">1</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49830..49831"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43371..43397"><span>realise_base_vars_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
             </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
   
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>lemma1_3</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49096..49112"><span>t1'_t2'_subterms</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46357..46362"><span>t1_t2</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_antisym|fact"><span>le_antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_eq_less_or_eq|fact"><span>le_eq_less_or_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_neq_iff|fact"><span>nat_neq_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_51613..51614">2</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51613..51614"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>           
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43371..43397"><span>realise_base_vars_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
             </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46975..46976"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47134..47141"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>lemma1_3</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49096..49112"><span>t1'_t2'_subterms</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46357..46362"><span>t1_t2</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_antisym|fact"><span>le_antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_eq_less_or_eq|fact"><span>le_eq_less_or_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_neq_iff|fact"><span>nat_neq_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45148..45153"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45823..45831"><span>subterms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45836..45842"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53430..53435">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_mem|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_mem|thm"><span class="entity_def" id="offset_53436..53457">realisation_if_AF_mem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53430..53435"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
                  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_mem_in_branch|fact"><span>in_subterms'_if_AF_mem_in_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53430..53435"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54093..54095">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45154..45174"><span>realisation_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54093..54095"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s'</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Empty|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Empty|thm"><span class="entity_def" id="offset_54210..54227">realisation_Empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32739..32744"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.intros|fact"><span>bclosed.intros</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54784..54789">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Union|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Union|thm"><span class="entity_def" id="offset_54790..54807">realisation_Union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54784..54789"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54784..54789"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_54958..54975">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54958..54975"><a class="entity_ref" href="Set_Proc.html#offset_54958..54975"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54784..54789"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54784..54789"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_55701..55702">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_54958..54975"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55701..55702"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_56264..56268">case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56264..56268"><span>this</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55701..55702"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
      </span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t1</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
      </span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_56933..56934">1</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57013..57015">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57013..57015"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54958..54975"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57198..57200">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56933..56934"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57198..57200"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_57301..57302">2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57381..57383">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57381..57383"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54958..54975"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57566..57568">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57301..57302"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57566..57568"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57703..57708">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Inter|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Inter|thm"><span class="entity_def" id="offset_57709..57726">realisation_Inter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57703..57708"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57703..57708"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_57877..57894">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57877..57894"><a class="entity_ref" href="Set_Proc.html#offset_57877..57894"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t1_t2_subterms'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57703..57708"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57703..57708"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_58669..58670">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_58845..58847">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.intros|fact"><span>lexpands_int.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58845..58847"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_59023..59025">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59023..59025"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58669..58670"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_59319..59324">s1_s2</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t1</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57877..57894"><span>mem_subterms_last</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59319..59324"><span>s1_s2</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_59891..59895">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59891..59895"><span>that</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45154..45174"><span>realisation_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>s2</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s1</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.intros|fact"><span>lexpands_int.intros</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_57877..57894"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60492..60494">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60492..60494"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60687..60692">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Diff|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Diff|thm"><span class="entity_def" id="offset_60693..60709">realisation_Diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60687..60692"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60687..60692"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_60854..60871">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60854..60871"><a class="entity_ref" href="Set_Proc.html#offset_60854..60871"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60687..60692"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60687..60692"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_61583..61584">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_61779..61781">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.intros|fact"><span>lexpands_diff.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_61779..61781"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_61583..61584"><span>u</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53436..53457"><span>realisation_if_AF_mem</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_62233..62234">u</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60854..60871"><span>mem_subterms_last</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_62233..62234"><span>u</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_62753..62757">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_62753..62757"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.intros|fact"><span>lexpands_diff.intros</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_60854..60871"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_63122..63124">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63122..63124"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_63314..63319">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Single|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Single|thm"><span class="entity_def" id="offset_63320..63338">realisation_Single</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63314..63319"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63314..63319"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_63478..63495">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32710..32719"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63314..63319"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_63918..63919">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64115..64117">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.intros|fact"><span>lexpands_single.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_64115..64117"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63918..63919"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41969..41989"><span>realisation_if_AT_eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.intros|fact"><span>lexpands_single.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63478..63495"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64714..64716">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_64714..64716"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>›</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39634..39643"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_simps|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(5)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(4)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(3)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(1)|thm"><span class="entity_def" id="offset_64885..64902">realisation_simps</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Set_Proc.html#offset_54210..54227"><span>realisation_Empty</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54790..54807"><span>realisation_Union</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57709..57726"><span>realisation_Inter</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60693..60709"><span>realisation_Diff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63320..63338"><span>realisation_Single</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Coherence</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65027..65032">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I\&lt;^sub&gt;s\&lt;^sub&gt;t_realisation_eq_realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.I\&lt;^sub&gt;s\&lt;^sub&gt;t_realisation_eq_realisation|thm"><span class="entity_def" id="offset_65050..65082">I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>realise</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>realise</span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65027..65032"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_64885..64902"><span>realisation_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65261..65266">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.coherence|fact"><span class="entity_def" id="Set_Proc.open_branch.coherence|thm"><span>coherence</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>realise</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65261..65266"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>φ</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_65450..65454">less</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_65500..65504">Atom</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_65561..65565">Elem</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65500..65504"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65500..65504"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65561..65565"><span>Elem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65050..65082"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41317..41338"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_65828..65833">Equal</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65500..65504"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65500..65504"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65828..65833"><span>Equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65050..65082"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41969..41989"><span>realisation_if_AT_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66119..66122">And</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66119..66122"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66348..66350">Or</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66348..66350"><span>Or</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66348..66350"><span>Or</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66732..66735">Neg</span><span> </span><span class="skolem"><span>φ'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ'</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66789..66793">Atom</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66856..66860">Elem</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66789..66793"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66789..66793"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66856..66860"><span>Elem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65050..65082"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53436..53457"><span>realisation_if_AF_mem</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_67139..67144">Equal</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66789..66793"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66789..66793"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67139..67144"><span>Equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65050..65082"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45154..45174"><span>realisation_if_AF_eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_67428..67431">And</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67428..67431"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67428..67431"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_67836..67838">Or</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67836..67838"><span>Or</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67836..67838"><span>Or</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_68210..68214">Neg'</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>Neg</span><span> </span><span class="skolem"><span>φ''</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66732..66735"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68210..68214"><span>Neg'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65450..65454"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of the Calculus</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of Closedness</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wf_trancl_hmem_rel|fact"><span class="entity_def" id="Set_Proc.wf_trancl_hmem_rel|thm"><span>wf_trancl_hmem_rel</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_trancl|fact"><span>wf_trancl</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.wf_hmem_rel|fact"><span>wf_hmem_rel</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.trancl_hmem_rel_not_refl|fact"><span class="entity_def" id="Set_Proc.trancl_hmem_rel_not_refl|thm"><span>trancl_hmem_rel_not_refl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wf_trancl_hmem_rel|fact"><span>wf_trancl_hmem_rel</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_68670..68675">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mem_trancl_elts_rel_if_member_seq|fact"><span class="entity_def" id="Set_Proc.mem_trancl_elts_rel_if_member_seq|thm"><span>mem_trancl_elts_rel_if_member_seq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68670..68675"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq.induct|fact"><span>member_seq.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_68905..68906">2</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>cs</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68905..68906"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel_def|fact"><span>hmem_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Cons</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>cs'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68905..68906"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68905..68906"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel_def|fact"><span>hmem_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl_into_trancl2|fact"><span>trancl_into_trancl2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69293..69298">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bclosed_sound|fact"><span class="entity_def" id="Set_Proc.bclosed_sound|thm"><span>bclosed_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69293..69298"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69401..69405">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69293..69298"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69401..69405"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.induct|fact"><span>bclosed.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_69517..69528">memberCycle</span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69517..69528"><span>memberCycle</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle.elims|fact"><span>member_cycle.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69517..69528"><span>memberCycle</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_trancl_elts_rel_if_member_seq|fact"><span>mem_trancl_elts_rel_if_member_seq</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle.simps|fact"><span>member_cycle.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>  
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.trancl_hmem_rel_not_refl|fact"><span>trancl_hmem_rel_not_refl</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp.simps|fact"><span>interp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of the Expansion Rules</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_70069..70074">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_sound|fact"><span class="entity_def" id="Set_Proc.lexpands_sound|thm"><span>lexpands_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70069..70074"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_iff|fact"><span>empty_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.empty_set|fact"><span>empty_set</span></a><span> </span><a class="entity_ref" href="Logic.html#Logic.interp.simps|fact"><span>interp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>,</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_70496..70500">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70496..70500"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70496..70500"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_70588..70592">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70588..70592"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70588..70592"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_70770..70774">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70770..70774"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70770..70774"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_70862..70866">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70862..70866"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70862..70866"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_71045..71049">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71045..71049"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71045..71049"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_71131..71135">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71131..71135"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71131..71135"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq_induct&apos;|fact"><span>lexpands_eq_induct'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_71401..71405">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>subst</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71401..71405"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71401..71405"><a class="entity_ref" href="Set_Proc.html#offset_71401..71405"><span>this</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_71522..71526">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>neq</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71522..71526"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71522..71526"><a class="entity_ref" href="Set_Proc.html#offset_71522..71526"><span>this</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>4</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71606..71611">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_sound|thm"><span>bexpands_nowit_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71606..71611"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71830..71835">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|thm"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71830..71835"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71973..71978">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|fact"><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|thm"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub>_upd_eq_if_not_mem_vars_atom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71973..71978"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_72156..72161">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.interp_upd_eq_if_not_mem_vars_fm|fact"><span class="entity_def" id="Set_Proc.interp_upd_eq_if_not_mem_vars_fm|thm"><span>interp_upd_eq_if_not_mem_vars_fm</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72156..72161"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>φ</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub>_upd_eq_if_not_mem_vars_atom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_72356..72361">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_sound|thm"><span>bexpands_wit_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72356..72361"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span class="main"><span>=</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
             </span><span class="main"><span>[</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_72688..72692">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_72694..72695">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72688..72692"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72688..72692"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_72791..72792">y</span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span>
     </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72694..72695"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72694..72695"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72791..72792"><span>y</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_72694..72695"><span>1</span></a><span>"</span></span><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.interp_upd_eq_if_not_mem_vars_fm|fact"><span>interp_upd_eq_if_not_mem_vars_fm</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_73406..73411">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_sound|thm"><span>bexpands_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73406..73411"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_73616..73620">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_73622..73623">1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_sound|fact"><span>bexpands_nowit_sound</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73616..73620"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73622..73623"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_sound|fact"><span>bexpands_wit_sound</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Upper Bounding the Cardinality of a Branch</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_73905..73910">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.Ex_bexpands_wits_if_in_wits|fact"><span class="entity_def" id="Set_Proc.Ex_bexpands_wits_if_in_wits|thm"><span>Ex_bexpands_wits_if_in_wits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73905..73910"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73905..73910"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_74477..74478">2</span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74530..74532">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74530..74532"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74477..74478"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>bs</span></span><span> _ </span><span class="skolem"><span>b2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_74767..74768">1</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74824..74826">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>bs</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74824..74826"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74767..74768"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_75004..75005">2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_75084..75088">True</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2.prems</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2.hyps</span></a><span>"</span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75084..75088"><span>True</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_75356..75361">False</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2.hyps</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch|const"><span>vars_branch</span></a><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75720..75728">moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75720..75728"><span>calculation</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75356..75361"><span>False</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75004..75005"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75900..75905">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_wits_ub_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_wits_ub_if_wf_branch|thm"><span>card_wits_ub_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75900..75905"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75900..75905"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_76215..76222">card_gt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_76278..76284">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ts</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
       </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76477..76481">have</span></span></span><span> </span><span class="entity_def" id="offset_76482..76483">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>t1_t2</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
      </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76477..76481"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Ex_bexpands_wits_if_in_wits|fact"><span>Ex_bexpands_wits_if_in_wits</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76477..76481"><span>that</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76735..76739">have</span></span></span><span> </span><span class="entity_def" id="offset_76740..76745">ts_wd</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.exE_some|fact"><span>exE_some</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76482..76483"><span>*</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76735..76739"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_reflection|fact"><span>eq_reflection</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76278..76284"><span>ts_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76735..76739"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77044..77048">have</span></span></span><span> </span><span class="entity_def" id="offset_77049..77063">in_subterms_fm</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77044..77048"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.discI|fact"><span>list.discI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77049..77063"><span>in_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.subrelI|fact"><span>subrelI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageE|fact"><span>imageE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.mem_Sigma_iff|fact"><span>mem_Sigma_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.card_cartesian_product|fact"><span>card_cartesian_product</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groebner_Basis.html#Groebner_Basis.algebra|method"><span class="operator"><span>algebra</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76215..76222"><span>card_gt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image|fact"><span>card_image</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_less|fact"><span>linorder_not_less</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xb1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xbs2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xb2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yb1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ybs2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yb2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_77869..77872">x_y</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>xb1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xbs2</span></span><span> </span><span class="skolem"><span>xb1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>xbs2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>yb1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>ybs2</span></span><span> </span><span class="skolem"><span>yb1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>ybs2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76740..76745"><span>ts_wd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.exhaust|fact"><span>prod.exhaust</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>yb2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_same_cases|fact"><span>suffix_same_cases</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>yb1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xb1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_Cons|fact"><span>suffix_Cons</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span><span>5</span><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span><span>9</span><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77869..77872"><span>x_y</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.set_mono_suffix|fact"><span>set_mono_suffix</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_le|fact"><span>linorder_not_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_78842..78847">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_subterms_branch_ub_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_subterms_branch_ub_if_wf_branch|thm"><span>card_subterms_branch_ub_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78842..78847"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78842..78847"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_wits|fact"><span>finite_wits</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span>
                </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79191..79196">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_literals_branch_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_literals_branch_if_wf_branch|thm"><span>card_literals_branch_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>
       </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>
             </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?AFs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal.elims|fact"><span>is_literal.elims</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?AFs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79758..79766">moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79758..79766"><span>calculation</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?ATs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?AFs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_surj|fact"><span>finite_surj</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_pset_atoms_branch|fact"><span>finite_pset_atoms_branch</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="var"><span>?AFs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_pset_atoms_branch|fact"><span>finite_pset_atoms_branch</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.surj_card_le|fact"><span>surj_card_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.atoms|const"><span>atoms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Atom</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?Eqs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_cartesian_product|fact"><span>finite_cartesian_product</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Els</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Eqs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?Eqs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image|fact"><span>card_image</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?A</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.card_cartesian_product|fact"><span>card_cartesian_product</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.monoid_mult_class.power2_eq_square|fact"><span>power2_eq_square</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?Eqs</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Els</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Eqs</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_UnI|fact"><span>finite_UnI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup.boundedE|fact"><span>sup.boundedE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_absorb2|fact"><span>sup_absorb2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_subterms_branch_ub_if_wf_branch|fact"><span>card_subterms_branch_ub_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79191..79196"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.mult_le_mono2|fact"><span>mult_le_mono2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power2_nat_le_eq_le|fact"><span>power2_nat_le_eq_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81630..81635">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.lexpands_not_literal_mem_subfms_last|thm"><span>lexpands_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81630..81635"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81630..81635"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81973..81978">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.bexpands_not_literal_mem_subfms_last|thm"><span>bexpands_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81973..81978"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>bs</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81973..81978"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81973..81978"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82588..82593">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.expandss_not_literal_mem_subfms_last|thm"><span>expandss_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82588..82593"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_82893..82894">2</span><span> </span><span class="skolem"><span>b3</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82893..82894"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_not_literal_mem_subfms_last|fact"><span>lexpands_not_literal_mem_subfms_last</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82588..82593"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_83095..83096">3</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b3</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_83095..83096"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_not_literal_mem_subfms_last|fact"><span>bexpands_not_literal_mem_subfms_last</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82588..82593"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83297..83302">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_not_literal_branch_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_not_literal_branch_if_wf_branch|thm"><span>card_not_literal_branch_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>φ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_83297..83302"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_not_literal_mem_subfms_last|fact"><span>expandss_not_literal_mem_subfms_last</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83709..83711">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_83709..83711"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subfms|fact"><span>finite_subfms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.semiring_numeral_class.mult_2|fact"><span>mult_2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subfms|fact"><span>finite_subfms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84100..84105">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_wf_branch_ub|fact"><span class="entity_def" id="Set_Proc.card_wf_branch_ub|thm"><span>card_wf_branch_ub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?csts</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_Un|fact"><span>finite_Un</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.finite_set|fact"><span>List.finite_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84100..84105"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_literals_branch_if_wf_branch|fact"><span>card_literals_branch_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_not_literal_branch_if_wf_branch|fact"><span>card_not_literal_branch_if_wf_branch</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84100..84105"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_wits_ub_if_wf_branch|fact"><span>card_wits_ub_if_wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_0_eq|fact"><span>card_0_eq</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_leI|fact"><span>Suc_leI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>3</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groebner_Basis.html#Groebner_Basis.algebra|method"><span class="operator"><span>algebra</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_increasing|fact"><span>power_increasing</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_increasing|fact"><span>power_increasing</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The Decision Procedure</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.intro|fact"><span class="entity_def" id="Set_Proc.mlss_proc_def|fact"><span class="entity_def" id="Set_Proc.mlss_proc.intro|thm"><span class="entity_def" id="Set_Proc.mlss_proc_def|thm"><span class="entity_def" id="Set_Proc.mlss_proc_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc|locale"><span class="entity_def" id="Set_Proc.mlss_proc|const"><span>mlss_proc</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>lexpand</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.lexpands_lexpand|fact"><span class="entity_def" id="Set_Proc.mlss_proc.lexpands_lexpand|thm"><span class="entity_def" id="offset_85596..85612">lexpands_lexpand</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>bexpand</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.bexpands_bexpand|fact"><span class="entity_def" id="Set_Proc.mlss_proc.bexpands_bexpand|thm"><span class="entity_def" id="offset_85744..85760">bexpands_bexpand</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>bexpand</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.termination|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pinduct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.inducts|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.simps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.induct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.inducts|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.simps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.induct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.termination|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pinduct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.inducts|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.simps|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.induct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.inducts|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.simps|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.induct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph|const"><span class="entity_def" id="offset_85820..85828">function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>domintros</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch|const"><span class="entity_def" id="offset_85841..85857">mlss_proc_branch</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bexpand</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86192..86197">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom_if_wf_branch|thm"><span class="entity_def" id="offset_86198..86231">mlss_proc_branch_dom_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch_dom</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_86300..86306">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>card_ub</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86192..86197"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_86543..86547">less</span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86552..86556">have</span></span></span><span> </span><span class="entity_def" id="offset_86557..86562">less'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch_dom</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>card_ub</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86300..86306"><span>card_ub_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86552..86556"><span>that</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86933..86937">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch_dom</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86543..86547"><span>less</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b'</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_wf_branch_ub|fact"><span>card_wf_branch_ub</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86933..86937"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86300..86306"><span>card_ub_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.diff_less_mono2|fact"><span>diff_less_mono2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_le_trans|fact"><span>order_less_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86552..86556"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.psubset_card_mono|fact"><span>psubset_card_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="skolem"><span>b'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
        </span><span class="skolem"><span>bs'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
                  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_strict_mono|fact"><span>bexpands_strict_mono</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nonempty|fact"><span>bexpands_nonempty</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.lattice_class.inf_sup_aci|fact"><span>inf_sup_aci</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.psubsetI|fact"><span>psubsetI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_ge1|fact"><span>sup_ge1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86557..86562"><span>less'</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.domintros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86557..86562"><span>less'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.domintros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_strict_mono|fact"><span>bexpands_strict_mono</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.domintros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def_raw|axiom"><span class="entity_def" id="offset_88148..88158">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc|const"><span class="entity_def" id="offset_88159..88168">mlss_proc</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mlss_proc</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_88238..88243">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_complete|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_complete|thm"><span class="entity_def" id="offset_88244..88269">mlss_proc_branch_complete</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86198..86231"><span>mlss_proc_branch_dom_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88238..88243"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88238..88243"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.pinduct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_88579..88580">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?b'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88579..88580"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_lexpands|fact"><span>wf_branch_lexpands</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88579..88580"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88579..88580"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88579..88580"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_89067..89068">3</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89067..89068"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_89143..89145">b'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89067..89068"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_expandss|fact"><span>wf_branch_expandss</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89067..89068"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89143..89145"><span>b'</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89067..89068"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89688..89690">by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89688..89690"><span>coherence</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_in_set|fact"><span>last_in_set</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89688..89690"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89832..89837">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sound|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sound|thm"><span class="entity_def" id="offset_89838..89860">mlss_proc_branch_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86198..86231"><span>mlss_proc_branch_dom_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="bound"><span>b'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89832..89837"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.pinduct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_90221..90222">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?b'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90221..90222"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_lexpands|fact"><span>wf_branch_lexpands</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90221..90222"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_sound|fact"><span>lexpands_sound</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b''</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b''</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="skolem"><span>b''</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90221..90222"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85596..85612"><span>lexpands_lexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_90667..90668">3</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90667..90668"><span>3</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_90741..90745">have</span></span></span><span> </span><span class="entity_def" id="offset_90746..90758">wf_branch_b'</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90741..90745"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_sound|fact"><span>bexpands_sound</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90667..90668"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M'</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_90667..90668"><span>3.IH</span></a><span>"</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_85841..85857"><span>mlss_proc_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90746..90758"><span>wf_branch_b'</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b''</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b''</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="skolem"><span>b''</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_90667..90668"><span>3.hyps</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2-4</span><span class="main"><span class="main"><span>,</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90667..90668"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85744..85760"><span>bexpands_bexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85820..85828"><span>mlss_proc_branch.psimps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bclosed_sound|fact"><span>bclosed_sound</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_91448..91455">theorem</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_complete|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_complete|thm"><span>mlss_proc_complete</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88159..88168"><span>mlss_proc</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91448..91455"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88244..88269"><span>mlss_proc_branch_complete</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88148..88158"><span>mlss_proc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_91682..91689">theorem</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_sound|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_sound|thm"><span>mlss_proc_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88159..88168"><span>mlss_proc</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91682..91689"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89838..89860"><span>mlss_proc_branch_sound</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88148..88158"><span>mlss_proc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>