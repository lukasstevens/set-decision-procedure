<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Set_Proc</title>
</head>


<body>
<div class="head">
<h1>Theory Set_Proc</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Set_Proc.html"><span>Set_Proc</span></a><span>                
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Realisation.html"><span>Realisation</span></a><span> </span><a href="HF_Extras.html"><span>HF_Extras</span></a><span> </span><a href="Set_Semantics.html"><span>Set_Semantics</span></a><span> </span><a href="Typing.html"><span>Typing</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>chapter</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A Decision Procedure for MLSS</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>This theory proves the soundness and completeness of the
</span><span>  tableau calculus defined in </span><span class="antiquoted"><span class="operator"><span>🗏</span></span><a href="Set_Calculus.html"><span>‹./Set_Calculus.thy›</span></a></span><span>
</span><span>  It then lifts those properties to a recursive procedure
</span><span>  that applies the rules of the calculus exhaustively.
</span><span>  To obtain a decision procedure, we also prove termination.</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Basic Definitions</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.lin_sat_def|fact"><span class="entity_def" id="Set_Proc.lin_sat_def|thm"><span class="entity_def" id="Set_Proc.lin_sat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.lin_sat|const"><span>lin_sat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_519..524">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lin_satD|fact"><span class="entity_def" id="Set_Proc.lin_satD|thm"><span>lin_satD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_519..524"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.not_lin_satD|fact"><span class="entity_def" id="Set_Proc.not_lin_satD|thm"><span>not_lin_satD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.sat_def|fact"><span class="entity_def" id="Set_Proc.sat_def|thm"><span class="entity_def" id="Set_Proc.sat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.sat|const"><span>sat</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∄</span></span><span class="bound"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="bound"><span>bs'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_839..844">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.satD|fact"><span class="entity_def" id="Set_Proc.satD(2)|thm"><span class="entity_def" id="Set_Proc.satD(1)|thm"><span>satD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∄</span></span><span class="bound"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="bound"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_839..844"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                            
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.wits_def|fact"><span class="entity_def" id="Set_Proc.wits_def|thm"><span class="entity_def" id="Set_Proc.wits_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.wits|const"><span>wits</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wits</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.pwits_def|fact"><span class="entity_def" id="Set_Proc.pwits_def|thm"><span class="entity_def" id="Set_Proc.pwits_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.pwits|const"><span>pwits</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pwits</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>c</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
                  </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_singleton|fact"><span class="entity_def" id="Set_Proc.wits_singleton|thm"><span>wits_singleton</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwits_singleton|fact"><span class="entity_def" id="Set_Proc.pwits_singleton|thm"><span>pwits_singleton</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1403..1408">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwitsD|fact"><span class="entity_def" id="Set_Proc.pwitsD(3)|thm"><span class="entity_def" id="Set_Proc.pwitsD(2)|thm"><span class="entity_def" id="Set_Proc.pwitsD(1)|thm"><span>pwitsD</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_1403..1408"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1623..1628">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwitsI|fact"><span class="entity_def" id="Set_Proc.pwitsI|thm"><span>pwitsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_1623..1628"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_wits|fact"><span class="entity_def" id="Set_Proc.finite_wits|thm"><span>finite_wits</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_pwits|fact"><span class="entity_def" id="Set_Proc.finite_pwits|thm"><span>finite_pwits</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_wits|fact"><span>finite_wits</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_subterms_branch_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_subterms_branch_eq|thm"><span>lexpands_subterms_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span>
          </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span>
            </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span>
       </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> 
       </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_branch_trans|fact"><span>subterms_term_subterms_branch_trans</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3974..3975">6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3989..3990">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom|type"><span>pset_atom</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_3974..3975"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.induct|fact"><span>lexpands_eq.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span>
            </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_3989..3990"><span>*</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_vars_branch_eq|thm"><span>lexpands_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_subterms_branch_eq|fact"><span>lexpands_subterms_branch_eq</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_eq_if_vars_branch_eq|fact"><span>subterms_branch_eq_if_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_subterms_branch_eq|thm"><span>bexpands_nowit_subterms_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4796..4797">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_4796..4797"><span>4</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4989..4990">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_4989..4990"><span>5</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_vars_branch_eq|thm"><span>bexpands_nowit_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span>bexpands_nowit_subterms_branch_eq</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_eq_if_vars_branch_eq|fact"><span>subterms_branch_eq_if_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_wits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_wits_eq|thm"><span>lexpands_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_vars_branch_eq|fact"><span>lexpands_vars_branch_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5580..5585">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_wits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_wits_eq|thm"><span>bexpands_nowit_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_vars_branch_eq|fact"><span>bexpands_nowit_vars_branch_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5580..5585"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5580..5585"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5784..5789">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_vars_branch_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_vars_branch_eq|thm"><span>bexpands_wit_vars_branch_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><a class="entity_ref" href="Set_Proc.html#offset_5784..5789"><span>assms</span></a></a></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6052..6057">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_wits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_wits_eq|thm"><span>bexpands_wit_wits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><a class="entity_ref" href="Set_Proc.html#offset_6052..6057"><span>assms</span></a></a></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_def|fact"><span>vars_branch_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6329..6334">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_pwits_subs|fact"><span class="entity_def" id="Set_Proc.lexpands_pwits_subs|thm"><span>lexpands_pwits_subs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6329..6334"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6329..6334"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>no_new_subterms›</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.no_new_subterms_def|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_def|thm"><span class="entity_def" id="Set_Proc.no_new_subterms_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
   </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6657..6662">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subtermsI|fact"><span class="entity_def" id="Set_Proc.no_new_subtermsI|thm"><span>no_new_subtermsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6657..6662"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6837..6842">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.Var_mem_subterms_branch_and_not_in_wits|fact"><span class="entity_def" id="Set_Proc.Var_mem_subterms_branch_and_not_in_wits|thm"><span>Var_mem_subterms_branch_and_not_in_wits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_6837..6842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.image_set_diff|fact"><span>image_set_diff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.image_UN|fact"><span>image_UN</span></a><span>
                 </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.Un_vars_term_subterms_branch_eq_vars_branch|fact"><span>Un_vars_term_subterms_branch_eq_vars_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7145..7150">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_cases|fact"><span class="entity_def" id="Set_Proc.subterms_branch_cases|thm"><span>subterms_branch_cases</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span>
    </span><span class="main"><span>(</span></span><span>Empty</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Union</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Inter</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Diff</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Single</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t1</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>Var</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_7490..7493">Var</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7145..7150"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Var_mem_subterms_branch_and_not_in_wits|fact"><span>Var_mem_subterms_branch_and_not_in_wits</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageI|fact"><span>imageI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7490..7493"><span>Var</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7145..7150"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7145..7150"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7145..7150"><span>that</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7671..7676">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subterms_casesI|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_casesI|thm"><span>no_new_subterms_casesI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> Empty Union Inter Diff Single</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsI|fact"><span>no_new_subtermsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_8162..8168">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8162..8168"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_7671..7676"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_cases|fact"><span>subterms_branch_cases</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_subs_subterms_fm|fact"><span>vars_fm_subs_subterms_fm</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8340..8345">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subtermsD|fact"><span class="entity_def" id="Set_Proc.no_new_subtermsD(5)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(4)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(3)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.no_new_subtermsD(1)|thm"><span>no_new_subtermsD</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t1</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8340..8345"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8790..8795">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.lexpands_no_new_subterms|thm"><span>lexpands_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8790..8795"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_subterms_branch_eq|fact"><span>lexpands_subterms_branch_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_8790..8795"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9044..9049">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_subterms_atomI|fact"><span class="entity_def" id="Set_Proc.subterms_branch_subterms_atomI|thm"><span>subterms_branch_subterms_atomI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom|const"><span>subterms_atom</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9044..9049"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.cases|fact"><span>subterms_atom.cases</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_Atom_trans|fact"><span>subterms_term_subterms_atom_Atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9354..9359">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_no_new_subterms|thm"><span>bexpands_nowit_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9354..9359"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_subterms_branch_eq|fact"><span>bexpands_nowit_subterms_branch_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9354..9359"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9645..9650">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_no_new_subterms|thm"><span>bexpands_wit_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_9645..9650"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span>
                   </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_atom_trans|fact"><span>subterms_term_subterms_atom_trans</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_term_subterms_fm_trans|fact"><span>subterms_term_subterms_fm_trans</span></a><span>
             </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span>
             </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_casesI|fact"><span>no_new_subterms_casesI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10079..10084">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.bexpands_no_new_subterms|thm"><span>bexpands_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10079..10084"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.cases|fact"><span>bexpands.cases</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_no_new_subterms|fact"><span>bexpands_nowit_no_new_subterms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_no_new_subterms|fact"><span>bexpands_wit_no_new_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10352..10357">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.expandss_no_new_subterms|thm"><span>expandss_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10352..10357"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_new_subterms|fact"><span>lexpands_no_new_subterms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_new_subterms|fact"><span>bexpands_no_new_subterms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_subterms_fm_lastI|fact"><span class="entity_def" id="Set_Proc.subterms_branch_subterms_fm_lastI|thm"><span>subterms_branch_subterms_fm_lastI</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_subterms_subterms_fm_trans|fact"><span>subterms_branch_subterms_subterms_fm_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>wits_subterms›</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.wits_subterms_def|fact"><span class="entity_def" id="Set_Proc.wits_subterms_def|thm"><span class="entity_def" id="Set_Proc.wits_subterms_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.wits_subterms|const"><span>wits_subterms</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wits_subterms</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10912..10917">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_no_new_subterms|thm"><span>subterms_branch_eq_if_no_new_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><span>assms</span></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_11101..11106">simps</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_10912..10917"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11101..11106"><span>simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_subs_subterms_fm|fact"><span>vars_fm_subs_subterms_fm</span></a><span>
                   </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span class="main"><span class="main"><span>]</span></span></span><span>
             </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_subterms_fm_lastI|fact"><span>subterms_branch_subterms_fm_lastI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_subterms_last_disjnt|fact"><span class="entity_def" id="Set_Proc.wits_subterms_last_disjnt|thm"><span>wits_subterms_last_disjnt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Completeness of the Calculus</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Proof of Lemma 2</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.is_literal.elims|fact"><span class="entity_def" id="Set_Proc.is_literal.induct|fact"><span class="entity_def" id="Set_Proc.is_literal.simps|fact"><span class="entity_def" id="Set_Proc.is_literal.pelims|fact"><span class="entity_def" id="Set_Proc.is_literal.cases|fact"><span class="entity_def" id="Set_Proc.is_literal.termination|fact"><span class="entity_def" id="Set_Proc.is_literal.pinduct|fact"><span class="entity_def" id="Set_Proc.is_literal.psimps|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.inducts|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.simps|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.induct|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.cases|fact"><span class="entity_def" id="Set_Proc.is_literal_rel.intros|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.inducts|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.simps|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.induct|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.cases|fact"><span class="entity_def" id="Set_Proc.is_literal_graph.intros|fact"><span class="entity_def" id="Set_Proc.is_literal.elims(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.elims(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.elims(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.induct|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(7)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(6)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(5)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(4)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.simps(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.pelims(1)|thm"><span class="entity_def" id="Set_Proc.is_literal.cases|thm"><span class="entity_def" id="Set_Proc.is_literal.termination|thm"><span class="entity_def" id="Set_Proc.is_literal.pinduct|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(7)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(6)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(5)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(4)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(3)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(2)|thm"><span class="entity_def" id="Set_Proc.is_literal.psimps(1)|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.inducts|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.simps|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.induct|thm"><span class="entity_def" id="Set_Proc.is_literal_rel.cases|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.inducts|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.simps|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.induct|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.cases|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(7)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(6)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(5)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(4)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(3)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(2)|thm"><span class="entity_def" id="Set_Proc.is_literal_graph.intros(1)|thm"><span class="entity_def" id="Set_Proc.is_literal_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_rel_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_sumC_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_graph_def|axiom"><span class="entity_def" id="Set_Proc.is_literal_dom|const"><span class="entity_def" id="Set_Proc.is_literal_rel|const"><span class="entity_def" id="Set_Proc.is_literal_sumC|const"><span class="entity_def" id="Set_Proc.is_literal_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.is_literal|const"><span>is_literal</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm|type"><span>fm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Atom|const"><span>Atom</span></a><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_literal</span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11759..11764">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.lexpands_no_wits_if_not_literal|thm"><span>lexpands_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11759..11764"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11759..11764"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_11759..11764"><span>P_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12064..12069">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_no_wits_if_not_literal|thm"><span>bexpands_nowit_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12064..12069"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_def|fact"><span>Int_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12064..12069"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12397..12402">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_no_wits_if_not_literal|thm"><span>bexpands_wit_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12397..12402"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_def|fact"><span>Int_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12397..12402"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12732..12737">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.bexpands_no_wits_if_not_literal|thm"><span>bexpands_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12732..12737"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>bs'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_cases|fact"><span>bexpands_cases</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_no_wits_if_not_literal|fact"><span>bexpands_wit_no_wits_if_not_literal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_no_wits_if_not_literal|fact"><span>bexpands_nowit_no_wits_if_not_literal</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_12732..12737"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13093..13098">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_no_wits_if_not_literal|fact"><span class="entity_def" id="Set_Proc.expandss_no_wits_if_not_literal|thm"><span>expandss_no_wits_if_not_literal</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13093..13098"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_wits_if_not_literal|fact"><span>lexpands_no_wits_if_not_literal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_wits_if_not_literal|fact"><span>bexpands_no_wits_if_not_literal</span></a><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13093..13098"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13480..13485">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_fm_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_fm_pwits_eq|thm"><span>lexpands_fm_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm|const"><span>lexpands_fm</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13480..13485"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_def|fact"><span>vars_branch_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13775..13780">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_un_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_un_pwits_eq|thm"><span>lexpands_un_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un|const"><span>lexpands_un</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14017..14021">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13775..13780"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14056..14060">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14017..14021"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_13775..13780"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14056..14060"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14115..14119">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14115..14119"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14369..14374">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_int_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_int_pwits_eq|thm"><span>lexpands_int_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int|const"><span>lexpands_int</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14613..14617">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14369..14374"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14652..14656">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14613..14617"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14369..14374"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14652..14656"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14711..14715">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14711..14715"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14966..14971">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_diff_pwits_eq|fact"><span class="entity_def" id="Set_Proc.lexpands_diff_pwits_eq|thm"><span>lexpands_diff_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff|const"><span>lexpands_diff</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
    </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15212..15216">note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14966..14971"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15251..15255">note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15212..15216"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_14966..14971"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15251..15255"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15310..15314">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15310..15314"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15566..15571">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_pwits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_pwits_eq|thm"><span>bexpands_nowit_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15566..15571"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15566..15571"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15782..15786">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15782..15786"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15566..15571"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsI|fact"><span>pwitsI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_15566..15571"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16142..16147">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_pwits_eq|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_pwits_eq|thm"><span>bexpands_wit_pwits_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><span>assms</span></a></a></a></a></a></a></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16142..16147"><span>assms</span></a><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16416..16421">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2_lexpands|fact"><span class="entity_def" id="Set_Proc.lemma_2_lexpands|thm"><span>lemma_2_lexpands</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>assms</span></a><span class="main"><span>(</span></span><span>2-6</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_pwits_subs|fact"><span>lexpands_pwits_subs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16952..16953">1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16963..16967">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>t</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16963..16967"><span>that</span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_16952..16953"><span>1.prems</span></a><span>"</span></span><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16952..16953"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16963..16967"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_appendR|fact"><span>last_appendR</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_16952..16953"><span>1</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16952..16953"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_fm_pwits_eq|fact"><span>lexpands_fm_pwits_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17614..17615">2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_un_pwits_eq|fact"><span>lexpands_un_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_17614..17615"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17756..17757">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_17756..17757"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18276..18277">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_18276..18277"><span>5</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18835..18836">3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_int_pwits_eq|fact"><span>lexpands_int_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_18835..18836"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18979..18980">1</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_18979..18980"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19499..19500">6</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_19499..19500"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19792..19793">4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_diff_pwits_eq|fact"><span>lexpands_diff_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_19792..19793"><span>4</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a></a></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19938..19939">1</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.UN_iff|fact"><span>UN_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fm_simps|fact"><span>subterms_fm_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_atom.simps|fact"><span>subterms_atom.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_refl|fact"><span>subterms_refl</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_19938..19939"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_20464..20465">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_20464..20465"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21090..21091">2</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_subterms_atomI|fact"><span>subterms_branch_subterms_atomI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21090..21091"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subtermsD|fact"><span>no_new_subtermsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21090..21091"><span>2</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span>
               </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21683..21684">6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_no_new_subterms|fact"><span>lexpands_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21802..21804">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21802..21804"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21683..21684"><span>6</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq_induct&apos;|fact"><span>lexpands_eq_induct'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_21941..21946">subst</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22121..22122">1</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22121..22122"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22121..22122"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1'_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1'_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22121..22122"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_22793..22794">2</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22793..22794"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22793..22794"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_22793..22794"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23463..23464">3</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23463..23464"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl|const"><span>subst_tlvl</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23463..23464"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="main"><span>(</span></span><span>refl</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_left</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t1_right</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.subst_tlvl.cases|fact"><span>subst_tlvl.cases</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_23463..23464"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_21941..21946"><span>subst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>neq</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_16416..16421"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24239..24244">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2_bexpands|fact"><span class="entity_def" id="Set_Proc.lemma_2_bexpands|thm"><span>lemma_2_bexpands</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span>
                      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_no_new_subterms|fact"><span>bexpands_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>4</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_24769..24770">1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_24769..24770"><span>1</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_pwits_eq|fact"><span>bexpands_nowit_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_24769..24770"><span>1</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>,</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25178..25179">3</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25178..25179"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25432..25433">4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25432..25433"><span>4</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25686..25687">5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_25686..25687"><span>5</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwitsD|fact"><span>pwitsD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25942..25943">2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><span>2</span></a></a></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff_not_equal|fact"><span>disjoint_iff_not_equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>not_in_pwits</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><span>2</span></a></a></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_24239..24244"><span>P_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_pwits_eq|fact"><span>bexpands_wit_pwits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_25942..25943"><span>2</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1-3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?x</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> </span><span class="var"><span>?b</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26444..26449">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.subterms_branch_eq_if_wf_branch|thm"><span>subterms_branch_eq_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch|const"><span>subterms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26444..26449"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_new_subterms|fact"><span>expandss_no_new_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26444..26449"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_no_new_subterms|fact"><span>subterms_branch_eq_if_no_new_subterms</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26964..26969">lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_new_subterms_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.no_new_subterms_if_wf_branch|thm"><span>no_new_subterms_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_wits_if_not_literal_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.no_wits_if_not_literal_if_wf_branch|thm"><span>no_wits_if_not_literal_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_26964..26969"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27287..27289">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_simps|fact"><span>subterms_branch_simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_new_subterms|fact"><span>expandss_no_new_subterms</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_27287..27289"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_no_wits_if_not_literal|fact"><span>expandss_no_wits_if_not_literal</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27624..27629">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lemma_2|fact"><span class="entity_def" id="Set_Proc.lemma_2(3)|thm"><span class="entity_def" id="Set_Proc.lemma_2(2)|thm"><span class="entity_def" id="Set_Proc.lemma_2(1)|thm"><span>lemma_2</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27872..27876">have</span></span></span><span> </span><span class="entity_def" id="offset_27877..27899">no_wits_if_not_literal</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_wits_if_not_literal_if_wf_branch|fact"><span>no_wits_if_not_literal_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27872..27876"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28073..28077">have</span></span></span><span> </span><span class="entity_def" id="offset_28078..28093">no_new_subterms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms|const"><span>no_new_subterms</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_if_wf_branch|fact"><span>no_new_subterms_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28073..28077"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27624..27629"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_28459..28463">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_28465..28466">2</span><span> </span><span class="skolem"><span>b1</span></span><span> </span><span class="skolem"><span>b2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2_lexpands|fact"><span>lemma_2_lexpands</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28459..28463"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> _
        </span><a class="entity_ref" href="Set_Proc.html#offset_28078..28093"><span>no_new_subterms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28459..28463"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27877..27899"><span>no_wits_if_not_literal</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28459..28463"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28465..28466"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_28791..28792">3</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2_bexpands|fact"><span>lemma_2_bexpands</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28791..28792"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> _ _
        </span><a class="entity_ref" href="Set_Proc.html#offset_28078..28093"><span>no_new_subterms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28791..28792"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_27877..27899"><span>no_wits_if_not_literal</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_28791..28792"><span>3</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_28791..28792"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Urelements</span><span>›</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.urelems_def|fact"><span class="entity_def" id="Set_Proc.urelems_def|thm"><span class="entity_def" id="Set_Proc.urelems_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.urelems|const"><span>urelems</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem&apos;|const"><span>urelem'</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_urelems|fact"><span class="entity_def" id="Set_Proc.finite_urelems|thm"><span>finite_urelems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem_def|fact"><span>urelem_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.urelems_subs_subterms|fact"><span class="entity_def" id="Set_Proc.urelems_subs_subterms|thm"><span>urelems_subs_subterms</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.is_Var_if_mem_urelems|fact"><span class="entity_def" id="Set_Proc.is_Var_if_mem_urelems|thm"><span>is_Var_if_mem_urelems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.is_Var|const"><span>is_Var</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.is_Var_if_urelem&apos;|fact"><span>is_Var_if_urelem'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.urelems_subs_vars|fact"><span class="entity_def" id="Set_Proc.urelems_subs_vars|thm"><span>urelems_subs_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_subs_subterms|fact"><span>urelems_subs_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_Var_if_mem_urelems|fact"><span>is_Var_if_mem_urelems</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.is_Var_def|fact"><span>is_Var_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.Un_vars_term_subterms_branch_eq_vars_branch|fact"><span>Un_vars_term_subterms_branch_eq_vars_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30191..30196">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.types_term_inf|fact"><span class="entity_def" id="Set_Proc.types_term_inf|thm"><span>types_term_inf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v1</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="free"><span>l1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="free"><span>l2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="free"><span>l1</span></span><span> </span><span class="free"><span>l2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30191..30196"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>l1</span></span></span><span> </span><span class="quoted"><span class="free"><span>l2</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_min|fact"><span>inf_min</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_cases|fact"><span>types_pset_term_cases</span></a><span>
                  </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_intros&apos;|fact"><span>types_pset_term_intros'</span></a><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term.intros|fact"><span>types_pset_term.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4-</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30485..30490">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.types_pset_atom_inf|fact"><span class="entity_def" id="Set_Proc.types_pset_atom_inf|thm"><span>types_pset_atom_inf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom|type"><span>pset_atom</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v1</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30485..30490"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_atom.simps|fact"><span>types_pset_atom.simps</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_min|fact"><span>inf_min</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.min_Suc_Suc|fact"><span>min_Suc_Suc</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_term_inf|fact"><span>types_term_inf</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30691..30696">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.types_pset_fm_inf|fact"><span class="entity_def" id="Set_Proc.types_pset_fm_inf|thm"><span>types_pset_fm_inf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v1</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30691..30696"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_pset_atom_inf|fact"><span>types_pset_atom_inf</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_fm_def|fact"><span>types_pset_fm_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30868..30873">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.types_urelems|fact"><span class="entity_def" id="Set_Proc.types_urelems|thm"><span>types_urelems</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>u</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30868..30873"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_31108..31114">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>V</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>V</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_expandss|fact"><span>types_expandss</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_31303..31304">v</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_simps|fact"><span>vars_branch_simps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_31373..31379">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31434..31438">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_pset_fm_if_on_vars_eq|fact"><span>types_pset_fm_if_on_vars_eq</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31434..31438"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31373..31379"><span>v'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31303..31304"><span>v</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31373..31379"><span>v'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    
  </span><span class="keyword3"><span class="command"><span>define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>m_x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>ARG_MIN</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_31843..31846">m_x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>V</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>m_x</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m_x</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_nat_le|fact"><span>arg_min_nat_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_natI|fact"><span>arg_min_natI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ex_in_conv|fact"><span>ex_in_conv</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_31954..31960">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32028..32032">note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?h</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="skolem"><span>m_x</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_32097..32105">M_inf_eq</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.semilattice_inf_class.Inf_fin.eq_fold|fact"><span>Inf_fin.eq_fold</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32028..32032"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32166..32170">have</span></span></span><span> </span><span class="entity_def" id="offset_32171..32176">M_leq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>v</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32166..32170"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m_x</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.semilattice_inf_class.Inf_fin|const"><span>⨅<span class="hidden">⇩</span><sub>f</sub><span class="hidden">⇩</span><sub>i</sub><span class="hidden">⇩</span><sub>n</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31954..31960"><span>M_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32097..32105"><span>M_inf_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.semilattice_inf_class.Inf_fin.in_idem|fact"><span>Inf_fin.in_idem</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31843..31846"><span>m_x</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32166..32170"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.coboundedI1|fact"><span>inf.coboundedI1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31954..31960"><span>M_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32097..32105"><span>M_inf_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_32746..32752">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_32772..32777">M'_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.semilattice_inf_class.Inf_fin|const"><span>⨅<span class="hidden">⇩</span><sub>f</sub><span class="hidden">⇩</span><sub>i</sub><span class="hidden">⇩</span><sub>n</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.semilattice_inf_class.Inf_fin|const"><span>⨅<span class="hidden">⇩</span><sub>f</sub><span class="hidden">⇩</span><sub>i</sub><span class="hidden">⇩</span><sub>n</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m_x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?M'</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_commute|fact"><span>insert_commute</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_pset_fm_inf|fact"><span>types_pset_fm_inf</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32746..32752"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="var"><span>?M'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31843..31846"><span>m_x</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33053..33057">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>v</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33053..33057"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_32746..32752"><span>insert.IH</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31843..31846"><span>m_x</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="var"><span>?M'</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32772..32777"><span>M'_eq</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33358..33362">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33358..33362"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_33439..33440">v</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem&apos;|const"><span>urelem'</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>φ</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_33511..33517">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33572..33576">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_pset_fm_if_on_vars_eq|fact"><span>types_pset_fm_if_on_vars_eq</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33572..33576"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33511..33517"><span>v'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33439..33440"><span>v</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33511..33517"><span>v'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>uv</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_33883..33885">uv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>uv</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33439..33440"><span>v</span></a><span> </span><a class="entity_ref" href="Typing.html#Typing.is_Var_if_urelem&apos;|fact"><span>is_Var_if_urelem'</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.is_Var_def|fact"><span>is_Var_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_in_set|fact"><span>last_in_set</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33439..33440"><span>v</span></a><span>  </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_in_set|fact"><span>last_in_set</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33511..33517"><span>v'_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_cases|fact"><span>types_pset_term_cases</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_intros&apos;|fact"><span>types_pset_term_intros'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_32171..32176"><span>M_leq</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?v</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="skolem"><span>v'</span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>V</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_33883..33885"><span>uv</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_cases|fact"><span>types_pset_term_cases</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term_intros&apos;|fact"><span>types_pset_term_intros'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_30868..30873"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_31108..31114"><span>V_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34474..34479">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mem_urelems_if_urelem_last|fact"><span class="entity_def" id="Set_Proc.mem_urelems_if_urelem_last|thm"><span>mem_urelems_if_urelem_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem|const"><span>urelem</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34474..34479"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.urelem_invar_if_wf_branch|fact"><span>urelem_invar_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34474..34479"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem_def|fact"><span>urelem_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34824..34829">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.not_urelem_comps_if_compound|fact"><span class="entity_def" id="Set_Proc.not_urelem_comps_if_compound(2)|thm"><span class="entity_def" id="Set_Proc.not_urelem_comps_if_compound(1)|thm"><span>not_urelem_comps_if_compound</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>(⊓<span class="hidden">⇩</span><sub>s</sub>)</span></a></span><span class="main"><span>,</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>(⊔<span class="hidden">⇩</span><sub>s</sub>)</span></a></span><span class="main"><span>,</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>(-<span class="hidden">⇩</span><sub>s</sub>)</span></a></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34824..34829"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_35068..35070">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.not_urelem_comps_if_compound|fact"><span>not_urelem_comps_if_compound</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>f</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>t1</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>t2</span></span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_35068..35070"><a class="entity_ref" href="Set_Proc.html#offset_35068..35070"><span>this</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_34824..34829"><a class="entity_ref" href="Set_Proc.html#offset_34824..34829"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem_def|fact"><span>urelem_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Realization of an Open Branch</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.base_vars_def|fact"><span class="entity_def" id="Set_Proc.base_vars_def|thm"><span class="entity_def" id="Set_Proc.base_vars_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.base_vars|const"><span>base_vars</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_base_vars|fact"><span class="entity_def" id="Set_Proc.finite_base_vars|thm"><span>finite_base_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_Un|fact"><span>finite_Un</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_pwits|fact"><span>finite_pwits</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_urelems|fact"><span>finite_urelems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.pwits_subs_base_vars|fact"><span class="entity_def" id="Set_Proc.pwits_subs_base_vars|thm"><span>pwits_subs_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_subs_vars|fact"><span class="entity_def" id="Set_Proc.base_vars_subs_vars|thm"><span>base_vars_subs_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_subs_vars|fact"><span>urelems_subs_vars</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.subterms&apos;_def|fact"><span class="entity_def" id="Set_Proc.subterms&apos;_def|thm"><span class="entity_def" id="Set_Proc.subterms&apos;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.subterms&apos;|const"><span>subterms'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>subterms'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.bgraph_def|fact"><span class="entity_def" id="Set_Proc.bgraph_def|thm"><span class="entity_def" id="Set_Proc.bgraph_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.bgraph|const"><span>bgraph</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph|type"><span>pre_digraph</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bgraph</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span>
      </span><span class="bound"><span>vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>
    </span><span class="keyword1"><span>in</span></span><span>
      </span><span class="main"><span>⦇</span></span><span> verts </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>vs</span></span><span class="main"><span>,</span></span><span>
        arcs </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
        tail </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>,</span></span><span>
        head </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>⦈</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span class="entity_def" id="Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|thm"><span>base_vars_Un_subterms'_eq_subterms</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_base_vars_Un_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.finite_base_vars_Un_subterms&apos;|thm"><span>finite_base_vars_Un_subterms'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.verts_bgraph|fact"><span class="entity_def" id="Set_Proc.verts_bgraph|thm"><span>verts_bgraph</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.verts_bgraph_eq_subterms|fact"><span class="entity_def" id="Set_Proc.verts_bgraph_eq_subterms|thm"><span>verts_bgraph_eq_subterms</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.finite_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.finite_subterms&apos;|thm"><span>finite_subterms'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_base_vars|fact"><span>finite_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.base_vars_subterms&apos;_disjnt|fact"><span class="entity_def" id="Set_Proc.base_vars_subterms&apos;_disjnt|thm"><span>base_vars_subterms'_disjnt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36932..36937">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|thm"><span>wits_subterms_eq_base_vars_Un_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_36932..36937"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch_subs_subterms_branch|fact"><span>vars_branch_subs_subterms_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37213..37218">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_mem_in_branch(1)|thm"><span>in_subterms'_if_AT_mem_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37213..37218"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37529..37534">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_mem_in_branch(1)|thm"><span>in_subterms'_if_AF_mem_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37529..37534"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37845..37850">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AT_eq_in_branch(1)|thm"><span>in_subterms'_if_AT_eq_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_37845..37850"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38159..38164">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch(2)|thm"><span class="entity_def" id="Set_Proc.in_subterms&apos;_if_AF_eq_in_branch(1)|thm"><span>in_subterms'_if_AF_eq_in_branch</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38159..38164"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38473..38478">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span class="entity_def" id="Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|thm"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.is_Var|const"><span>is_Var</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38473..38478"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.open_branch.intro|fact"><span class="entity_def" id="Set_Proc.open_branch_def|fact"><span class="entity_def" id="Set_Proc.open_branch.intro|thm"><span class="entity_def" id="Set_Proc.open_branch_def|thm"><span class="entity_def" id="Set_Proc.open_branch_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch|locale"><span class="entity_def" id="Set_Proc.open_branch|const"><span>open_branch</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.wf_branch|fact"><span class="entity_def" id="Set_Proc.open_branch.wf_branch|thm"><span class="entity_def" id="offset_38806..38815">wf_branch</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.bopen|fact"><span class="entity_def" id="Set_Proc.open_branch.bopen|thm"><span class="entity_def" id="offset_38835..38840">bopen</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.types|fact"><span class="entity_def" id="Set_Proc.open_branch.types|thm"><span class="entity_def" id="offset_38856..38861">types</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.infinite_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.infinite_vars|thm"><span class="entity_def" id="offset_38890..38903">infinite_vars</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38940..38949">sublocale</span></span></span><span> fin_digraph_bgraph</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.fin_digraph|locale"><span>fin_digraph</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_base_vars|fact"><span>finite_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.arcs|const"><span>arcs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>simproc</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_Collect</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_vimageI|fact"><span>finite_vimageI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a></a><span class="main"><span class="main"><span>]</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.member_seq_if_cas|fact"><span class="entity_def" id="Set_Proc.open_branch.member_seq_if_cas|thm"><span class="entity_def" id="offset_39381..39398">member_seq_if_cas</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cas</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>is</span></span><span> </span><span class="free"><span>t2</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>is</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>t1</span></span></span><span> </span><span class="quoted"><span class="free"><span>t2</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.member_cycle_if_cycle|fact"><span class="entity_def" id="Set_Proc.open_branch.member_cycle_if_cycle|thm"><span class="entity_def" id="offset_39563..39584">member_cycle_if_cycle</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="free"><span>c</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Arc_Walk.html#Arc_Walk.pre_digraph.cycle_def|fact"><span>pre_digraph.cycle_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39381..39398"><span>member_seq_if_cas</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> dag_bgraph</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.dag|locale"><span>dag</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_39848..39849">1</span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39848..39849"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.memberCycle|fact"><span>memberCycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_iff|fact"><span>empty_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.empty_set|fact"><span>empty_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetI|fact"><span>subsetI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>e1</span></span><span> </span><span class="skolem"><span>e2</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="bound"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_39563..39584"><span>member_cycle_if_cycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cycle</span></a><span> </span><span class="skolem"><span>c</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.arcs|const"><span>arcs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38940..38949"><span>fin_digraph_bgraph.cycle_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Arc_Walk.html#Arc_Walk.pre_digraph.awalk_def|fact"><span>pre_digraph.awalk_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.tail|const"><span>tail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.head|const"><span>head</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.memberCycle|fact"><span>memberCycle</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.open_branch.I_def|fact"><span class="entity_def" id="Set_Proc.open_branch.I_def|thm"><span class="entity_def" id="Set_Proc.open_branch.I_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.open_branch.I.cong|fact"><span class="entity_def" id="Set_Proc.open_branch.I.cong|thm"><span class="entity_def" id="Set_Proc.open_branch.I|const"><span class="entity_def" id="offset_41059..41060">I</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hf|type"><span>hf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
             </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41202..41207">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.Ex_set_family|fact"><span class="entity_def" id="Set_Proc.Ex_set_family|thm"><span>Ex_set_family</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>I</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>I</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>I</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>P</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ip</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_41342..41344">ip</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.bij_betw|const"><span>bij_betw</span></a><span> </span><span class="skolem"><span>ip</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Countable_Set.html#Countable_Set.to_nat_on_finite|fact"><span>to_nat_on_finite</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.Ordinal.html#Ordinal.ord_of|const"><span>ord_of</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="skolem"><span>ip</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41342..41344"><span>ip</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="var"><span>?I</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.bij_betw_def|fact"><span>bij_betw_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?I</span></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_I|thm"><span class="entity_def" id="offset_41628..41636">inj_on_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.card_I|fact"><span class="entity_def" id="Set_Proc.open_branch.card_I|thm"><span class="entity_def" id="offset_41670..41676">card_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Ex_set_family|fact"><span>Ex_set_family</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41884..41886">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_eq_Suc_le|fact"><span>less_eq_Suc_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41884..41886"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
       </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41202..41207"><span>I_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_base_vars_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_base_vars_I|thm"><span>inj_on_base_vars_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.inj_on_subterms&apos;_I|fact"><span class="entity_def" id="Set_Proc.open_branch.inj_on_subterms&apos;_I|thm"><span>inj_on_subterms'_I</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41628..41636"><span>inj_on_I</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.open_branch.eq_def|fact"><span class="entity_def" id="Set_Proc.open_branch.eq_def|thm"><span class="entity_def" id="Set_Proc.open_branch.eq_def_raw|axiom"><span class="entity_def" id="offset_42449..42459">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Set_Proc.open_branch.eq.cong|fact"><span class="entity_def" id="Set_Proc.open_branch.eq.cong|thm"><span class="entity_def" id="Set_Proc.open_branch.eq|const"><span class="entity_def" id="offset_42461..42463">eq</span></span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl|const"><span>symcl</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.reflcl|const"><span><span class="hidden">⇧</span><sup>=</sup></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.refl_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.refl_eq|thm"><span class="entity_def" id="offset_42515..42522">refl_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.refl|const"><span>refl</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.refl_on_def|fact"><span>refl_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.trans_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.trans_eq|thm"><span class="entity_def" id="offset_42590..42598">trans_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_42664..42669">assms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42701..42705">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42701..42705"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42664..42669"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
      </span><span class="entity_def" id="offset_42780..42783">s_t</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
      </span><span class="entity_def" id="offset_42841..42844">t_u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_42948..42954">intros</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span>
        </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span class="operator"><span>THEN</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_43057..43064">intros'</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42948..42954"><span>intros</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?x</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42948..42954"><span>intros</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?x</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42780..42783"><span>s_t</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42841..42844"><span>t_u</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42701..42705"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43057..43064"><span>intros'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42664..42669"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.sym_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.sym_eq|thm"><span class="entity_def" id="offset_43405..43411">sym_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.sym|const"><span>sym</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.sym_def|fact"><span>sym_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.equiv_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.equiv_eq|thm"><span class="entity_def" id="offset_43474..43482">equiv_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Equiv_Relations.html#Equiv_Relations.equiv|const"><span>equiv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Equiv_Relations.html#Equiv_Relations.equivI|fact"><span>equivI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42515..42522"><span>refl_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42590..42598"><span>trans_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43405..43411"><span>sym_eq</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43570..43575">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_pwits|thm"><span class="entity_def" id="offset_43576..43598">not_dominated_if_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43570..43575"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43725..43727">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2|fact"><span>lemma_2</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43725..43727"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43725..43727"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43883..43888">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_pwits|thm"><span class="entity_def" id="offset_43889..43911">parents_empty_if_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43576..43598"><span>not_dominated_if_pwits</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43883..43888"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44048..44053">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_AT_mem_if_urelem|fact"><span class="entity_def" id="Set_Proc.open_branch.not_AT_mem_if_urelem|thm"><span class="entity_def" id="offset_44054..44074">not_AT_mem_if_urelem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44048..44053"><span>assms</span></a><span> </span><a class="entity_ref" href="Typing.html#Typing.urelem_invar_if_wf_branch|fact"><span>urelem_invar_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem|const"><span>urelem</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38856..38861"><span>types</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_urelems|fact"><span>types_urelems</span></a><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem_def|fact"><span>urelem_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem_def|fact"><span>urelem_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_fmD|fact"><span>types_fmD</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_atom.simps|fact"><span>types_pset_atom.simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_term_unique|fact"><span>types_term_unique</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44442..44447">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_urelems|fact"><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_urelems|thm"><span class="entity_def" id="offset_44448..44472">not_dominated_if_urelems</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44054..44074"><span>not_AT_mem_if_urelem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44442..44447"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44597..44602">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_urelems|fact"><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_urelems|thm"><span class="entity_def" id="offset_44603..44627">parents_empty_if_urelems</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44448..44472"><span>not_dominated_if_urelems</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44597..44602"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44743..44748">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.not_dominated_if_base_vars|thm"><span class="entity_def" id="offset_44749..44775">not_dominated_if_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44743..44748"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44448..44472"><span>not_dominated_if_urelems</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43576..43598"><span>not_dominated_if_pwits</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44931..44936">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.parents_empty_if_base_vars|thm"><span class="entity_def" id="offset_44937..44963">parents_empty_if_base_vars</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44749..44775"><span>not_dominated_if_base_vars</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44931..44936"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.eq_class_subs_subterms|fact"><span class="entity_def" id="Set_Proc.open_branch.eq_class_subs_subterms|thm"><span class="entity_def" id="offset_45090..45112">eq_class_subs_subterms</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.finite_eq_class|fact"><span class="entity_def" id="Set_Proc.open_branch.finite_eq_class|thm"><span class="entity_def" id="offset_45323..45338">finite_eq_class</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45090..45112"><span>eq_class_subs_subterms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.finite_I_image_eq_class|fact"><span class="entity_def" id="Set_Proc.open_branch.finite_I_image_eq_class|thm"><span class="entity_def" id="offset_45457..45480">finite_I_image_eq_class</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image|const"><span>``</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45323..45338"><span>finite_eq_class</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45556..45570">interpretation</span></span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.realisation|locale"><span>realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subterms&apos;_disjnt|fact"><span>base_vars_subterms'_disjnt</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44749..44775"><span>not_dominated_if_base_vars</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="bound"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation|thm"><span class="entity_def" id="offset_45909..45920">realisation</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realisation_axioms</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.card_realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.card_realisation|thm"><span class="entity_def" id="offset_45949..45965">card_realisation</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_46061..46062">1</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>eq_class</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HF_Extras.html#HF_Extras.hcard_HF|fact"><span>hcard_HF</span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.Zero_hf_def|fact"><span>Zero_hf_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44937..44963"><span>parents_empty_if_base_vars</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45457..45480"><span>finite_I_image_eq_class</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>eq_class</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>eq_class</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>fin_digraph_bgraph.finite_parents</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45323..45338"><span>finite_eq_class</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_le_mono|fact"><span>add_le_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>eq_class</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fin_digraph_bgraph.parents_subs_verts</span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46061..46062"><span>1.hyps</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44749..44775"><span>not_dominated_if_base_vars</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_le_mono|fact"><span>add_le_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?B</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>{</span></span></span><span class="skolem"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>}</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45090..45112"><span>eq_class_subs_subterms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_46061..46062"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_46061..46062"><span>1.prems</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.semiring_numeral_class.mult_2|fact"><span>mult_2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_absorb|fact"><span>insert_absorb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_is_Un|fact"><span>insert_is_Un</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HF_Extras.html#HF_Extras.hcard_HF|fact"><span>hcard_HF</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>finite_realisation_parents</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fin_digraph_bgraph.parents_subs_verts</span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span> </span><span>fin_digraph_bgraph.finite_verts</span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph_eq_subterms|fact"><span>verts_bgraph_eq_subterms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I_neq_realise|fact"><span class="entity_def" id="Set_Proc.open_branch.I_neq_realise|thm"><span class="entity_def" id="offset_47911..47924">I_neq_realise</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45556..45570"><span>realise</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45949..45965"><span>card_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hcard|const"><span>hcard</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41670..41676"><span>card_I</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_le|fact"><span>linorder_not_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48221..48230">sublocale</span></span></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.realisation|locale"><span>realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a></span><span>
  </span><span class="keyword2"><span class="keyword"><span>rewrites</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span>realise</span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Trueprop|const"><span>Trueprop</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Trueprop|const"><span>Trueprop</span></a><span> </span><span class="bound"><span>P</span></span><span>"</span></span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45909..45920"><span>realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47911..47924"><span>I_neq_realise</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48499..48504">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.eq_class_singleton_if_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.eq_class_singleton_if_pwits|thm"><span class="entity_def" id="offset_48505..48532">eq_class_singleton_if_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48499..48504"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48669..48673">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48669..48673"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2|fact"><span>lemma_2</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a></a><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="skolem"><span>x'</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48499..48504"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_pwits|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_pwits|thm"><span>realise_pwits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise.simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_subs_base_vars|fact"><span>pwits_subs_base_vars</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48505..48532"><span>eq_class_singleton_if_pwits</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43889..43911"><span>parents_empty_if_pwits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I_in_realise_if_base_vars|fact"><span class="entity_def" id="Set_Proc.open_branch.I_in_realise_if_base_vars|thm"><span class="entity_def" id="offset_49291..49316">I_in_realise_if_base_vars</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42515..42522"><span>refl_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45457..45480"><span>finite_I_image_eq_class</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.refl_on_def|fact"><span>refl_on_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49431..49436">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_neq_if_base_vars_and_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_neq_if_base_vars_and_subterms&apos;|thm"><span class="entity_def" id="offset_49437..49475">realise_neq_if_base_vars_and_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49431..49436"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_47911..47924"><span>I_neq_realise</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49291..49316"><span>I_in_realise_if_base_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49431..49436"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49705..49710">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AT_mem_branch_wits_subtermsD(1)|thm"><span>AT_mem_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49705..49710"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49917..49922">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AF_mem_branch_wits_subtermsD(1)|thm"><span>AF_mem_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49917..49922"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50129..50134">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_branch_wits_subtermsD(1)|thm"><span>AT_eq_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50129..50134"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50339..50344">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD|fact"><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.AF_eq_branch_wits_subtermsD(1)|thm"><span class="entity_def" id="offset_50345..50372">AF_eq_branch_wits_subtermsD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms|const"><span>wits_subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50339..50344"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50549..50554">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_mem|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_mem|thm"><span class="entity_def" id="offset_50555..50576">realisation_if_AT_mem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50549..50554"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50549..50554"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise.cases</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50955..50960">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.AT_eq_urelems_subterms&apos;_cases|fact"><span class="entity_def" id="Set_Proc.open_branch.AT_eq_urelems_subterms&apos;_cases|thm"><span class="entity_def" id="offset_50961..50990">AT_eq_urelems_subterms'_cases</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="main"><span>(</span></span><span>urelems</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
          </span><span class="main"><span>(</span></span><span>subterms'</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38856..38861"><span>types</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_urelems|fact"><span>types_urelems</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v'</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_51250..51252">v'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>u</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50955..50960"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lst</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_51392..51395">lst</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>lst</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>lst</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_fmD|fact"><span>types_fmD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_atom.simps|fact"><span>types_pset_atom.simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_51496..51508">mem_subterms</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50955..50960"><a class="entity_ref" href="Set_Proc.html#offset_50955..50960"><span>assms</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51250..51252"><span>v'</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_51554..51558">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51554..51558"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51392..51395"><span>lst</span></a><span> </span><a class="entity_ref" href="Typing.html#Typing.types_term_unique|fact"><span>types_term_unique</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50955..50960"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lemma_2|fact"><span>lemma_2</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_51781..51785">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51781..51785"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>B_T_partition_verts</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51250..51252"><span>v'</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51496..51508"><span>mem_subterms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="skolem"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51392..51395"><span>lst</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51250..51252"><span>v'</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_term_unique|fact"><span>types_term_unique</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50955..50960"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_51496..51508"><span>mem_subterms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_52353..52358">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AT_eq|thm"><span class="entity_def" id="offset_52359..52379">realisation_if_AT_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52353..52358"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50961..50990"><span>AT_eq_urelems_subterms'_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_52565..52572">urelems</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52353..52358"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43474..43482"><span>equiv_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52353..52358"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Equiv_Relations.html#Equiv_Relations.equiv_class_eq_iff|fact"><span>equiv_class_eq_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52565..52572"><span>urelems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44603..44627"><span>parents_empty_if_urelems</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_52968..52977">subterms'</span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_52982..52986">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52982..52986"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hfset|const"><span>hfset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hfset|const"><span>hfset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF_hfset|fact"><span>HF_hfset</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
        </span><span class="entity_def" id="offset_53163..53164">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
           </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_53265..53270">s'_t'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52968..52977"><span>subterms'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52968..52977"><span>subterms'</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53163..53164"><span>a</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_53455..53456">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52968..52977"><span>subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dag_bgraph.adj_not_same</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53455..53456"><span>u</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dag_bgraph.adj_not_same</span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53735..53737">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52353..52358"><a class="entity_ref" href="Set_Proc.html#offset_52353..52358"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53735..53737"><a class="entity_ref" href="Set_Proc.html#offset_53735..53737"><span>this</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53265..53270"><span>s'_t'</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s'</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53918..53920">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53918..53920"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_53163..53164"><span>a</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54158..54163">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realise_base_vars_if_AF_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realise_base_vars_if_AF_eq|thm"><span class="entity_def" id="offset_54164..54190">realise_base_vars_if_AF_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49437..49475"><span>realise_neq_if_base_vars_and_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_49291..49316"><span>I_in_realise_if_base_vars</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hempty_iff|fact"><span>hempty_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise.elims</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.contr|fact"><span>contr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_54736..54742">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54736..54742"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42461..42463"><span>eq</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42449..42459"><span>eq_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Rtrancl_On.html#Rtrancl_On.symcl_def|fact"><span>symcl_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_singleton_iff|fact"><span>Image_singleton_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.symE|fact"><span>symE</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_43405..43411"><span>sym_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41628..41636"><span>inj_on_I</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><a class="entity_ref" href="Set_Proc.html#offset_54158..54163"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45090..45112"><span>eq_class_subs_subterms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_onD|fact"><span>inj_onD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_41059..41060"><span>I</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>eq_class</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_42515..42522"><span>refl_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Image_singleton_iff|fact"><span>Image_singleton_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageI|fact"><span>imageI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.refl_onD|fact"><span>refl_onD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion_hempty_left|fact"><span>hunion_hempty_left</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.Zero_hf_def|fact"><span>Zero_hf_def</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.inj_on_HF|fact"><span>inj_on_HF</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_onD|fact"><span>inj_onD</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_45457..45480"><span>finite_I_image_eq_class</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_44937..44963"><span>parents_empty_if_base_vars</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55632..55637">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.Ex_AT_eq_mem_subterms_last_if_subterms&apos;|fact"><span class="entity_def" id="Set_Proc.open_branch.Ex_AT_eq_mem_subterms_last_if_subterms&apos;|thm"><span class="entity_def" id="offset_55638..55677">Ex_AT_eq_mem_subterms_last_if_subterms'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="free"><span>t'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_55926..55931">False</span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55632..55637"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55926..55931"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="main"><span>(</span></span><span>t_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>t_wits</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_if_wf_branch|fact"><span>no_new_subterms_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.DiffI|fact"><span>DiffI</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.no_new_subterms_def|fact"><span>no_new_subterms_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_56241..56247">t_wits</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56241..56247"><span>t_wits</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_56385..56387">t'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50961..50990"><span>AT_eq_urelems_subterms'_cases</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>B_T_partition_verts</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56385..56387"><span>t'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55632..55637"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55632..55637"><span>assms</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56774..56779">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_eq|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_eq|thm"><span class="entity_def" id="offset_56780..56800">realisation_if_AF_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50345..50372"><span>AF_eq_branch_wits_subtermsD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56774..56779"><a class="entity_ref" href="Set_Proc.html#offset_56774..56779"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
    </span><span class="main"><span>(</span></span><span>t1_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span>(</span></span><span>t2_base_vars</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
    </span><span class="main"><span>(</span></span><span>subterms</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnE|fact"><span>UnE</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_eq_base_vars_Un_subterms&apos;|fact"><span>wits_subterms_eq_base_vars_Un_subterms'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>t1_base_vars</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56774..56779"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54164..54190"><span>realise_base_vars_if_AF_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>t2_base_vars</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56774..56779"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54164..54190"><span>realise_base_vars_if_AF_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_57449..57457">subterms</span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_57462..57468">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Δ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span class="bound"><span>t1</span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span class="bound"><span>t2</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span>
                            </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="bound"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_cartesian_product|fact"><span>finite_cartesian_product</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_subterms&apos;|fact"><span>finite_subterms'</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?h</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min|const"><span>min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>height</span></a><span> </span><span class="bound"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>height</span></a><span> </span><span class="bound"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57923..57927">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_57983..57988">t1_t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_min_on|const"><span>arg_min_on</span></a><span> </span><span class="var"><span>?h</span></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surj_pair|fact"><span>surj_pair</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_if_finite|fact"><span>arg_min_if_finite</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57923..57927"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57983..57988"><span>t1_t2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_58225..58229">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_min_on|const"><span>arg_min_on</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>S</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>S</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58225..58229"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58225..58229"><span>that</span></a><span>
          </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_58405..58407">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_eqI|fact"><span>Min_eqI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_if_finite|fact"><span>arg_min_if_finite</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58225..58229"><span>that</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58405..58407"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57923..57927"><span>that</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57983..57988"><span>t1_t2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_58601..58602">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_58739..58745">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_58760..58767">t1'_t2'</span><span class="main"><span>:</span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55638..55677"><span>Ex_AT_eq_mem_subterms_last_if_subterms'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_59057..59063">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_59227..59228">2</span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59227..59228"><span>2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_59519..59521">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59057..59063"><span>that</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_59519..59521"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_59227..59228"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52359..52379"><span>realisation_if_AT_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59227..59228"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59057..59063"><span>that</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>t1</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_55638..55677"><span>Ex_AT_eq_mem_subterms_last_if_subterms'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_59806..59812">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2''</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_59978..59979">2</span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>t2</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59978..59979"><span>2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="skolem"><span class="skolem"><span>t1''</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a></a><span> </span><span class="free"><span class="free"><span>b</span></span></span><span>›</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span>
            </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60278..60280">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59806..59812"><span>that</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_60278..60280"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_59978..59979"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52359..52379"><span>realisation_if_AT_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59978..59979"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1''</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_59806..59812"><span>that</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>t2</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58739..58745"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_60722..60738">t1'_t2'_subterms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>lemma1_2</span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_conv|fact"><span>case_prod_conv</span></a><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_urelems_if_urelem_last|fact"><span>mem_urelems_if_urelem_last</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_61053..61063">not_urelem</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem|const"><span>urelem</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.urelem|const"><span>urelem</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_vars_branch|fact"><span>finite_vars_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38890..38903"><span>infinite_vars</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.ex_new_if_finite|fact"><span>ex_new_if_finite</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_61256..61258">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.intros|fact"><span>bexpands_wit.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> _ _ _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_61256..61258"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_61053..61063"><span>not_urelem</span></a><span class="main"><span>]</span></span><span>
           </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
        </span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_iff|fact"><span>Diff_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_61643..61644">1</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_61643..61644"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AT_mem_in_branch|fact"><span>in_subterms'_if_AT_mem_in_branch</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54164..54190"><span>realise_base_vars_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
             </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
   
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>lemma1_3</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60722..60738"><span>t1'_t2'_subterms</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57983..57988"><span>t1_t2</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_antisym|fact"><span>le_antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_eq_less_or_eq|fact"><span>le_eq_less_or_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_neq_iff|fact"><span>nat_neq_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_63426..63427">2</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_63426..63427"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>t1'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.neqSelf|fact"><span>neqSelf</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>           
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_54164..54190"><span>realise_base_vars_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
             </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_eq_in_branch|fact"><span>in_subterms'_if_AF_eq_in_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>"</span></span></span><span>
             </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t2'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>t1'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_58601..58602"><span>*</span></a><span>"</span></span><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_58760..58767"><span>t1'_t2'</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>lemma1_3</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_60722..60738"><span>t1'_t2'_subterms</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.arg_min_least|fact"><span>arg_min_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>Δ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Δ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?h</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57983..57988"><span>t1_t2</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_antisym|fact"><span>le_antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_eq_less_or_eq|fact"><span>le_eq_less_or_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_neq_iff|fact"><span>nat_neq_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56774..56779"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57449..57457"><span>subterms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_57462..57468"><span>Δ_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65243..65248">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_mem|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_if_AF_mem|thm"><span class="entity_def" id="offset_65249..65270">realisation_if_AF_mem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65243..65248"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
                  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.in_subterms&apos;_if_AF_mem_in_branch|fact"><span>in_subterms'_if_AF_mem_in_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65243..65248"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65906..65908">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56780..56800"><span>realisation_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65906..65908"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s'</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Empty|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Empty|thm"><span class="entity_def" id="offset_66023..66040">realisation_Empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38835..38840"><span>bopen</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.intros|fact"><span>bclosed.intros</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Realisation.html#Realisation.parents|const"><span>parents</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems|const"><span>urelems</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_def|fact"><span>urelems_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_in_set|fact"><span>last_in_set</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.is_Var_if_urelem&apos;|fact"><span>is_Var_if_urelem'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.pre_digraph.verts|const"><span>verts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Empty|const"><span>∅</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.verts_bgraph|fact"><span>verts_bgraph</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_66764..66769">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Union|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Union|thm"><span class="entity_def" id="offset_66770..66787">realisation_Union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_66938..66955">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.not_urelem_comps_if_compound|fact"><span>not_urelem_comps_if_compound</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?f</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>(⊔<span class="hidden">⇩</span><sub>s</sub>)</span></a></span></a></span><span>"</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66938..66955"><a class="entity_ref" href="Set_Proc.html#offset_66938..66955"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66764..66769"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_67775..67776">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_66938..66955"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67775..67776"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_68338..68342">case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_68338..68342"><span>this</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_67775..67776"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hunion|const"><span>⊔</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
      </span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t1</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
      </span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_69007..69008">1</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69087..69089">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69087..69089"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66938..66955"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69272..69274">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69007..69008"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69272..69274"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_69375..69376">2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69455..69457">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.intros|fact"><span>lexpands_un.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69455..69457"><span>this</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66938..66955"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Union|const"><span>⊔<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69640..69642">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69375..69376"><span>2</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69640..69642"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69777..69782">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Inter|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Inter|thm"><span class="entity_def" id="offset_69783..69800">realisation_Inter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69951..69968">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.not_urelem_comps_if_compound|fact"><span>not_urelem_comps_if_compound</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?f</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>(⊓<span class="hidden">⇩</span><sub>s</sub>)</span></a></span></a></span><span>"</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69951..69968"><a class="entity_ref" href="Set_Proc.html#offset_69951..69968"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t1_t2_subterms'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69777..69782"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_70837..70838">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71013..71015">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.intros|fact"><span>lexpands_int.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71013..71015"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_71191..71193">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71191..71193"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_70837..70838"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hinter|const"><span>⊓</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_71487..71492">s1_s2</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s1</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t1</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69951..69968"><span>mem_subterms_last</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_71487..71492"><span>s1_s2</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_72059..72063">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq.intros|fact"><span>lexpands_eq.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72059..72063"><span>that</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56780..56800"><span>realisation_if_AF_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>s2</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s1</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s2</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.intros|fact"><span>lexpands_int.intros</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_69951..69968"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_72660..72662">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72660..72662"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t1</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Inter|const"><span>⊓<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s1</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_72855..72860">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Diff|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Diff|thm"><span class="entity_def" id="offset_72861..72877">realisation_Diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_73022..73039">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.not_urelem_comps_if_compound|fact"><span>not_urelem_comps_if_compound</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?f</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>(-<span class="hidden">⇩</span><sub>s</sub>)</span></a></span></a></span><span>"</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><span>assms</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_fmD|fact"><span>subterms_fmD</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73022..73039"><a class="entity_ref" href="Set_Proc.html#offset_73022..73039"><span>mem_subterms_last</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits|const"><span>pwits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.pwits_def|fact"><span>pwits_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.set_intros|fact"><span>pset_term.set_intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.mem_vars_fm_if_mem_subterms_fm|fact"><span>mem_vars_fm_if_mem_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72855..72860"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_subs_vars|fact"><span>base_vars_subs_vars</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_Un_subterms&apos;_eq_subterms|fact"><span>base_vars_Un_subterms'_eq_subterms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_73845..73846">u</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74041..74043">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.intros|fact"><span>lexpands_diff.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74041..74043"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73845..73846"><span>u</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65249..65270"><span>realisation_if_AF_mem</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_74495..74496">u</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_73022..73039"><span>mem_subterms_last</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_74495..74496"><span>u</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75015..75019">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75015..75019"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arcs_ends_def|fact"><span>arcs_ends_def</span></a><span> </span><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.arc_to_ends_def|fact"><span>arc_to_ends_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.intros|fact"><span>lexpands_diff.intros</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="Set_Proc.html#offset_73022..73039"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75384..75386">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75384..75386"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Diff|const"><span>-<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>u</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75576..75581">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_Single|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_Single|thm"><span class="entity_def" id="offset_75582..75600">realisation_Single</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75576..75581"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75576..75581"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_75740..75757">mem_subterms_last</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_subterms_fm_last_if_mem_subterms_branch|fact"><span>mem_subterms_fm_last_if_mem_subterms_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_38806..38815"><span>wf_branch</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.urelems_subs_vars|fact"><span>urelems_subs_vars</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars|const"><span>base_vars</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.base_vars_def|fact"><span>base_vars_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75576..75581"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;_def|fact"><span>subterms'_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_76203..76204">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Graph_Theory.Digraph.html#Digraph.dominates|const"><span>→</span></a></span><span>⇘</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph|const"><span>bgraph</span></a><span> </span><span class="free"><span>b</span></span><span>⇙ </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>dominates_if_mem_realisation</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms&apos;|const"><span>subterms'</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bgraph_def|fact"><span>bgraph_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76400..76402">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.intros|fact"><span>lexpands_single.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76400..76402"><span>this</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>=<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76203..76204"><span>s</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52359..52379"><span>realisation_if_AT_eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.HF|const"><span>HF</span></a><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.intros|fact"><span>lexpands_single.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75740..75757"><span>mem_subterms_last</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76999..77001">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_76999..77001"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="free"><span>t</span></span><span>›</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_48221..48230"><span>realise</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Single|const"><span>Single</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.realisation_simps|fact"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(5)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(4)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(3)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(2)|thm"><span class="entity_def" id="Set_Proc.open_branch.realisation_simps(1)|thm"><span class="entity_def" id="offset_77170..77187">realisation_simps</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Set_Proc.html#offset_66023..66040"><span>realisation_Empty</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_66770..66787"><span>realisation_Union</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_69783..69800"><span>realisation_Inter</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_72861..72877"><span>realisation_Diff</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_75582..75600"><span>realisation_Single</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Coherence</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77312..77317">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.I\&lt;^sub&gt;s\&lt;^sub&gt;t_realisation_eq_realisation|fact"><span class="entity_def" id="Set_Proc.open_branch.I\&lt;^sub&gt;s\&lt;^sub&gt;t_realisation_eq_realisation|thm"><span class="entity_def" id="offset_77335..77367">I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>realise</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span>realise</span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77312..77317"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77170..77187"><span>realisation_simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branchD|fact"><span>subterms_branchD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77546..77551">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Set_Proc.open_branch.coherence|fact"><span class="entity_def" id="Set_Proc.open_branch.coherence|thm"><span>coherence</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>realise</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77546..77551"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>φ</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_77735..77739">less</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_77785..77789">Atom</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_77846..77850">Elem</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77785..77789"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_mem_subterms_branchD|fact"><span>AT_mem_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77785..77789"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77846..77850"><span>Elem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77335..77367"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_50555..50576"><span>realisation_if_AT_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_78113..78118">Equal</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77785..77789"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT_eq_subterms_branchD|fact"><span>AT_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77785..77789"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78113..78118"><span>Equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77335..77367"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_52359..52379"><span>realisation_if_AT_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_78404..78407">And</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78404..78407"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_78633..78635">Or</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78633..78635"><span>Or</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_78633..78635"><span>Or</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79017..79020">Neg</span><span> </span><span class="skolem"><span>φ'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ'</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79074..79078">Atom</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79141..79145">Elem</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79074..79078"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_mem_subterms_branchD|fact"><span>AF_mem_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79074..79078"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79141..79145"><span>Elem</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77335..77367"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_65249..65270"><span>realisation_if_AF_mem</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79424..79429">Equal</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79074..79078"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF_eq_subterms_branchD|fact"><span>AF_eq_subterms_branchD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79074..79078"><span>Atom</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79424..79429"><span>Equal</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77335..77367"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_realisation_eq_realisation</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_56780..56800"><span>realisation_if_AF_eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_79713..79716">And</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.intros|fact"><span>bexpands_nowit.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79713..79716"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79713..79716"><span>And</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_80121..80123">Or</span><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="skolem"><span>φ2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_80121..80123"><span>Or</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_80121..80123"><span>Or</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_80495..80499">Neg'</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>Neg</span><span> </span><span class="skolem"><span>φ''</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.satD|fact"><span>satD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_satD|fact"><span>lin_satD</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>φ''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.intros|fact"><span>lexpands_fm.intros</span></a><span class="main"><span>(</span></span><span>7</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.intros|fact"><span>lexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_79017..79020"><span>Neg</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_80495..80499"><span>Neg'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_77735..77739"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of the Calculus</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of Closedness</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Set_Proc.wf_trancl_hmem_rel|fact"><span class="entity_def" id="Set_Proc.wf_trancl_hmem_rel|thm"><span>wf_trancl_hmem_rel</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_trancl|fact"><span>wf_trancl</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.wf_hmem_rel|fact"><span>wf_hmem_rel</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.trancl_hmem_rel_not_refl|fact"><span class="entity_def" id="Set_Proc.trancl_hmem_rel_not_refl|thm"><span>trancl_hmem_rel_not_refl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wf_trancl_hmem_rel|fact"><span>wf_trancl_hmem_rel</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_80955..80960">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mem_trancl_elts_rel_if_member_seq|fact"><span class="entity_def" id="Set_Proc.mem_trancl_elts_rel_if_member_seq|thm"><span>mem_trancl_elts_rel_if_member_seq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_80955..80960"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq.induct|fact"><span>member_seq.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_81190..81191">2</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>cs</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81190..81191"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel_def|fact"><span>hmem_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Cons</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>cs'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81190..81191"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81190..81191"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel_def|fact"><span>hmem_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl_into_trancl2|fact"><span>trancl_into_trancl2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81578..81583">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bclosed_sound|fact"><span class="entity_def" id="Set_Proc.bclosed_sound|thm"><span>bclosed_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81578..81583"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81686..81690">have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81578..81583"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81686..81690"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed.induct|fact"><span>bclosed.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_81802..81813">memberCycle</span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81802..81813"><span>memberCycle</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle.elims|fact"><span>member_cycle.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_81802..81813"><span>memberCycle</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HereditarilyFinite.Rank.html#Rank.hmem_rel|const"><span>hmem_rel</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.mem_trancl_elts_rel_if_member_seq|fact"><span>mem_trancl_elts_rel_if_member_seq</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle.simps|fact"><span>member_cycle.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>  
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.trancl_hmem_rel_not_refl|fact"><span>trancl_hmem_rel_not_refl</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp.simps|fact"><span>interp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82307..82312">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.types_term_lt_if_member_seq|fact"><span class="entity_def" id="Set_Proc.types_term_lt_if_member_seq|thm"><span>types_term_lt_if_member_seq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom|type"><span>pset_atom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>ls</span></span><span> </span><span class="bound"><span>lt</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="bound"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="bound"><span>lt</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>lt</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82307..82312"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quoted"><span class="free"><span>cs</span></span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq.induct|fact"><span>member_seq.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_82569..82570">2</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>cs</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>cs</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Cons</span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>cs'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82569..82570"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lu</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>lt</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>lu</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>lt</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>lu</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>lt</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82569..82570"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ls</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>lu</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>⊢</span></a></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_term|const"><span>:</span></a></span><span> </span><span class="skolem"><span>lu</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_atom.simps|fact"><span>types_pset_atom.simps</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_term_unique|fact"><span>types_term_unique</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types_pset_atom.simps|fact"><span>types_pset_atom.simps</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82971..82976">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.no_member_cycle_if_types_last|fact"><span class="entity_def" id="Set_Proc.no_member_cycle_if_types_last|thm"><span>no_member_cycle_if_types_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>presume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle|const"><span>member_cycle</span></a><span> </span><span class="free"><span>cs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_seq|const"><span>member_seq</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.member_cycle.elims|fact"><span>member_cycle.elims</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_82971..82976"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>φ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_urelems|fact"><span>types_urelems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms|const"><span>Atoms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.Atoms_def|fact"><span>Atoms_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Typing.html#Typing.types_fmD|fact"><span>types_fmD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.types_term_lt_if_member_seq|fact"><span>types_term_lt_if_member_seq</span></a><span> </span><a class="entity_ref" href="Typing.html#Typing.types_term_unique|fact"><span>types_term_unique</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Soundness of the Expansion Rules</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83643..83648">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_sound|fact"><span class="entity_def" id="Set_Proc.lexpands_sound|thm"><span>lexpands_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_83643..83648"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands.induct|fact"><span>lexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_fm.induct|fact"><span>lexpands_fm.induct</span></a><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_iff|fact"><span>empty_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.empty_set|fact"><span>empty_set</span></a><span> </span><a class="entity_ref" href="Logic.html#Logic.interp.simps|fact"><span>interp.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>,</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_ConsD|fact"><span>set_ConsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_un.induct|fact"><span>lexpands_un.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84070..84074">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84070..84074"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84070..84074"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84162..84166">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84162..84166"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84162..84166"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_int.induct|fact"><span>lexpands_int.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84344..84348">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84344..84348"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84344..84348"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84436..84440">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84436..84440"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84436..84440"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_diff.induct|fact"><span>lexpands_diff.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84619..84623">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84619..84623"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84619..84623"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84705..84709">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>branch</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84705..84709"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84705..84709"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>5</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_single.induct|fact"><span>lexpands_single.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>6</span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_eq_induct&apos;|fact"><span>lexpands_eq_induct'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_84975..84979">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>subst</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>t1'</span></span><span> </span><span class="skolem"><span>t2'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84975..84979"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_84975..84979"><a class="entity_ref" href="Set_Proc.html#offset_84975..84979"><span>this</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>6</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_85096..85100">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>neq</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>t</span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85096..85100"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85096..85100"><a class="entity_ref" href="Set_Proc.html#offset_85096..85100"><span>this</span></a></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>4</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85180..85185">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_nowit_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_nowit_sound|thm"><span>bexpands_nowit_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85180..85185"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85404..85409">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|thm"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85404..85409"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85547..85552">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|fact"><span class="entity_def" id="Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|thm"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub>_upd_eq_if_not_mem_vars_atom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85547..85552"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85730..85735">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.interp_upd_eq_if_not_mem_vars_fm|fact"><span class="entity_def" id="Set_Proc.interp_upd_eq_if_not_mem_vars_fm|thm"><span>interp_upd_eq_if_not_mem_vars_fm</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85730..85735"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>φ</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;a_upd_eq_if_not_mem_vars_atom|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub>_upd_eq_if_not_mem_vars_atom</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85930..85935">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_wit_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_wit_sound|thm"><span>bexpands_wit_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_85930..85935"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span class="main"><span>=</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
             </span><span class="main"><span>[</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term.Var|const"><span>Var</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>∈<span class="hidden">⇩</span><sub>s</sub></span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_86262..86266">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_86268..86269">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86262..86266"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86262..86266"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_86365..86366">y</span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span>
     </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.hmem|const"><span><span class="hidden">❙</span><b>∈</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HereditarilyFinite.HF.html#HF.not_hmem|const"><span><span class="hidden">❙</span><b>∉</b></span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86268..86269"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;t|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.I\&lt;^sub&gt;s\&lt;^sub&gt;t_upd_eq_if_not_mem_vars_term|fact"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>t</sub>_upd_eq_if_not_mem_vars_term</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86268..86269"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86365..86366"><span>y</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_86268..86269"><span>1</span></a><span>"</span></span><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars|const"><span>vars</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.interp_upd_eq_if_not_mem_vars_fm|fact"><span>interp_upd_eq_if_not_mem_vars_fm</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_fm_vars_branchI|fact"><span>vars_fm_vars_branchI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd_same|fact"><span>fun_upd_same</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86980..86985">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_sound|fact"><span class="entity_def" id="Set_Proc.bexpands_sound|thm"><span>bexpands_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>ψ</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_86980..86985"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_87190..87194">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_87196..87197">1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_sound|fact"><span>bexpands_nowit_sound</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_87190..87194"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_87196..87197"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_sound|fact"><span>bexpands_wit_sound</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Upper Bounding the Cardinality of a Branch</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_87479..87484">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.Ex_bexpands_wits_if_in_wits|fact"><span class="entity_def" id="Set_Proc.Ex_bexpands_wits_if_in_wits|thm"><span>Ex_bexpands_wits_if_in_wits</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="free"><span>t1</span></span><span> </span><span class="free"><span>t2</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_87479..87484"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_87479..87484"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_88051..88052">2</span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_88104..88106">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_wits_eq|fact"><span>lexpands_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88104..88106"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88051..88052"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>bs</span></span><span> _ </span><span class="skolem"><span>b2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_88341..88342">1</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_88398..88400">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_nowit_wits_eq|fact"><span>bexpands_nowit_wits_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit|const"><span>bexpands_nowit</span></a><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>bs</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88398..88400"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88341..88342"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_88578..88579">2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_88658..88662">True</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2.prems</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.intros|fact"><span>bexpands.intros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2.hyps</span></a><span>"</span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88658..88662"><span>True</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_88930..88935">False</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_mono|fact"><span>expandss_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a></a></a></a></a></a></a></a></a><span>"</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span></span></span></span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span>"</span></span><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2.hyps</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_wit_wits_eq|fact"><span>bexpands_wit_wits_eq</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.vars_branch|const"><span>vars_branch</span></a><span> </span><span class="skolem"><span>b1</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="skolem"><span>b1</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_def|fact"><span>wits_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89294..89302">moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89294..89302"><span>calculation</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88930..88935"><span>False</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_88578..88579"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89474..89479">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_wits_ub_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_wits_ub_if_wf_branch|thm"><span>card_wits_ub_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89474..89479"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89474..89479"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_89789..89796">card_gt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_89852..89858">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ts</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
       </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_90051..90055">have</span></span></span><span> </span><span class="entity_def" id="offset_90056..90057">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>t1_t2</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
      </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>t1_t2</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90051..90055"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.Ex_bexpands_wits_if_in_wits|fact"><span>Ex_bexpands_wits_if_in_wits</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90051..90055"><span>that</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_90309..90313">have</span></span></span><span> </span><span class="entity_def" id="offset_90314..90319">ts_wd</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>b1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>bs</span></span><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.exE_some|fact"><span>exE_some</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90056..90057"><span>*</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90309..90313"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_reflection|fact"><span>eq_reflection</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89852..89858"><span>ts_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90309..90313"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_90618..90622">have</span></span></span><span> </span><span class="entity_def" id="offset_90623..90637">in_subterms_fm</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>t1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>t2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90618..90622"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.discI|fact"><span>list.discI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90623..90637"><span>in_subterms_fm</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.subrelI|fact"><span>subrelI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageE|fact"><span>imageE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.mem_Sigma_iff|fact"><span>mem_Sigma_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.card_cartesian_product|fact"><span>card_cartesian_product</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groebner_Basis.html#Groebner_Basis.algebra|method"><span class="operator"><span>algebra</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_89789..89796"><span>card_gt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image|fact"><span>card_image</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_less|fact"><span>linorder_not_less</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xb1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xbs2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xb2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yb1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ybs2</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>yb2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_91443..91446">x_y</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>xb1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xbs2</span></span><span> </span><span class="skolem"><span>xb1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>xbs2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>yb1</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit|const"><span>bexpands_wit</span></a><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>ybs2</span></span><span> </span><span class="skolem"><span>yb1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>ybs2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_90314..90319"><span>ts_wd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.exhaust|fact"><span>prod.exhaust</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>yb2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_same_cases|fact"><span>suffix_same_cases</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>xb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>xb1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>yb1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix|const"><span>suffix</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>yb2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>yb1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xb1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>9</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_Cons|fact"><span>suffix_Cons</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span><span>5</span><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_witD|fact"><span>bexpands_witD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>5</span><span class="main"><span>,</span></span><span>6</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a></a></a><span class="main"><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span></span><span>9</span><span class="main"><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_91443..91446"><span>x_y</span></a><span class="main"><span>(</span></span><span>6</span><span class="main"><span>,</span></span><span>10</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.set_mono_suffix|fact"><span>set_mono_suffix</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_le|fact"><span>linorder_not_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_92416..92421">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_subterms_branch_ub_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_subterms_branch_ub_if_wf_branch|thm"><span>card_subterms_branch_ub_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.subterms_branch_eq_if_wf_branch|fact"><span>subterms_branch_eq_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_92416..92421"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_def|fact"><span>wits_subterms_def</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_92416..92421"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.finite_wits|fact"><span>finite_wits</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span>
                </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits_subterms_last_disjnt|fact"><span>wits_subterms_last_disjnt</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_92765..92770">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_literals_branch_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_literals_branch_if_wf_branch|thm"><span>card_literals_branch_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>
       </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>
             </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?AFs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal.elims|fact"><span>is_literal.elims</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AT|const"><span>AT</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?AFs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.AF|const"><span>AF</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_93332..93340">moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_93332..93340"><span>calculation</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?ATs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?AFs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_surj|fact"><span>finite_surj</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_pset_atoms_branch|fact"><span>finite_pset_atoms_branch</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?ATs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="var"><span>?AFs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_pset_atoms_branch|fact"><span>finite_pset_atoms_branch</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.surj_card_le|fact"><span>surj_card_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.fm.atoms|const"><span>atoms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>φ</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Atom</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?Eqs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms_branch_def|fact"><span>subterms_branch_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_branch|fact"><span>finite_subterms_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_cartesian_product|fact"><span>finite_cartesian_product</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Els</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Eqs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Elem|const"><span>Elem</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atom.Equal|const"><span>Equal</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_term|type"><span>pset_term</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="var"><span>?Eqs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image|fact"><span>card_image</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?A</span></span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Times|const"><span>×</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.card_cartesian_product|fact"><span>card_cartesian_product</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.monoid_mult_class.power2_eq_square|fact"><span>power2_eq_square</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="var"><span>?Els</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="var"><span>?Eqs</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Els</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="var"><span>?Eqs</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_UnI|fact"><span>finite_UnI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup.boundedE|fact"><span>sup.boundedE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_absorb2|fact"><span>sup_absorb2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_atoms_branch|const"><span>pset_atoms_branch</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_subterms_branch_ub_if_wf_branch|fact"><span>card_subterms_branch_ub_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_92765..92770"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.mult_le_mono2|fact"><span>mult_le_mono2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power2_nat_le_eq_le|fact"><span>power2_nat_le_eq_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_95204..95209">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.lexpands_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.lexpands_not_literal_mem_subfms_last|thm"><span>lexpands_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_95204..95209"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands_induct|fact"><span>lexpands_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_95204..95209"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_95547..95552">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.bexpands_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.bexpands_not_literal_mem_subfms_last|thm"><span>bexpands_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="free"><span>bs</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>bs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_95547..95552"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>bs</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands.induct|fact"><span>bexpands.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nowit.induct|fact"><span>bexpands_nowit.induct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_95547..95552"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>t1</span></span><span> </span><span class="skolem"><span>t2</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_wit.induct|fact"><span>bexpands_wit.induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_95547..95552"><span>P_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfmsD|fact"><span>subfmsD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_96162..96167">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.expandss_not_literal_mem_subfms_last|fact"><span class="entity_def" id="Set_Proc.expandss_not_literal_mem_subfms_last|thm"><span>expandss_not_literal_mem_subfms_last</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span>
                          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>b'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96162..96167"><span>assms</span></a><span class="main"><span>(</span></span><span>2-</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>b'</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.induct|fact"><span>expandss.induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_96467..96468">2</span><span> </span><span class="skolem"><span>b3</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96467..96468"><span>2</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_not_literal_mem_subfms_last|fact"><span>lexpands_not_literal_mem_subfms_last</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96162..96167"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_96669..96670">3</span><span> </span><span class="skolem"><span>bs</span></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="skolem"><span>b3</span></span><span> </span><span class="skolem"><span>b1</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_suffix|fact"><span>expandss_suffix</span></a><span> </span><a class="entity_ref" href="HOL-Library.Sublist.html#Sublist.suffix_bot.extremum_uniqueI|fact"><span>suffix_bot.extremum_uniqueI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96669..96670"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_not_literal_mem_subfms_last|fact"><span>bexpands_not_literal_mem_subfms_last</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96162..96167"><span>P_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_96871..96876">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_not_literal_branch_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.card_not_literal_branch_if_wf_branch|thm"><span>card_not_literal_branch_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>φ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>φ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_96871..96876"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>φ</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.expandss_not_literal_mem_subfms_last|fact"><span>expandss_not_literal_mem_subfms_last</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>φ</span></span><span class="main"><span>]</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_97283..97285">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Set_Proc.html#offset_97283..97285"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subfms|fact"><span>finite_subfms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Logic.html#Logic.fm.Neg|const"><span>Neg</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="skolem"><span>φ</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.semiring_numeral_class.mult_2|fact"><span>mult_2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_image_le|fact"><span>card_image_le</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subfms|fact"><span>finite_subfms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_97674..97679">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.card_wf_branch_ub|fact"><span class="entity_def" id="Set_Proc.card_wf_branch_ub|thm"><span>card_wf_branch_ub</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?csts</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>ψ</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.is_literal|const"><span>is_literal</span></a><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_disjoint|fact"><span>card_Un_disjoint</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_Un|fact"><span>finite_Un</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.finite_set|fact"><span>List.finite_set</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Proc.html#Set_Proc.wits|const"><span>wits</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_97674..97679"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_literals_branch_if_wf_branch|fact"><span>card_literals_branch_if_wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_not_literal_branch_if_wf_branch|fact"><span>card_not_literal_branch_if_wf_branch</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_97674..97679"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_wits_ub_if_wf_branch|fact"><span>card_wits_ub_if_wf_branch</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.finite_subterms_fm|fact"><span>finite_subterms_fm</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_0_eq|fact"><span>card_0_eq</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_leI|fact"><span>Suc_leI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="var"><span>?csts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>3</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groebner_Basis.html#Groebner_Basis.algebra|method"><span class="operator"><span>algebra</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power2|const"><span><span class="hidden">⇧</span><sup>2</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_increasing|fact"><span>power_increasing</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.linordered_semidom_class.power_increasing|fact"><span>power_increasing</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="var"><span>?csts</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="numeral"><span>4</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="var"><span>?csts</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The Decision Procedure</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.intro|fact"><span class="entity_def" id="Set_Proc.mlss_proc_def|fact"><span class="entity_def" id="Set_Proc.mlss_proc.intro|thm"><span class="entity_def" id="Set_Proc.mlss_proc_def|thm"><span class="entity_def" id="Set_Proc.mlss_proc_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc|locale"><span class="entity_def" id="Set_Proc.mlss_proc|const"><span>mlss_proc</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>lexpand</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.lexpands_lexpand|fact"><span class="entity_def" id="Set_Proc.mlss_proc.lexpands_lexpand|thm"><span class="entity_def" id="offset_99170..99186">lexpands_lexpand</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>bexpand</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.bexpands_bexpand|fact"><span class="entity_def" id="Set_Proc.mlss_proc.bexpands_bexpand|thm"><span class="entity_def" id="offset_99318..99334">bexpands_bexpand</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>bexpand</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.termination|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pinduct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.inducts|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.simps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.induct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.inducts|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.simps|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.induct|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cases|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.domintros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pelims(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.termination|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.pinduct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.psimps(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.inducts|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.simps|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.induct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.intros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.inducts|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.simps|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.induct|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cases|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(4)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(3)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(2)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.intros(1)|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph_def|axiom"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_rel|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sumC|const"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_graph|const"><span class="entity_def" id="offset_99394..99402">function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>domintros</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch|const"><span class="entity_def" id="offset_99415..99431">mlss_proc_branch</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>lexpand</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>bexpand</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>mlss_proc_branch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_99766..99771">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom_if_wf_branch|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_dom_if_wf_branch|thm"><span class="entity_def" id="offset_99772..99805">mlss_proc_branch_dom_if_wf_branch</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch_dom</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_99874..99880">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>card_ub</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subfms|const"><span>subfms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.subterms|const"><span>subterms</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="numeral"><span>4</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99766..99771"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.less_induct|fact"><span>less_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_100117..100121">less</span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_100126..100130">have</span></span></span><span> </span><span class="entity_def" id="offset_100131..100136">less'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch_dom</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_last_eq|fact"><span>expandss_last_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>card_ub</span></span><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>card_ub</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99874..99880"><span>card_ub_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100126..100130"><span>that</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_100507..100511">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch_dom</span></a><span> </span><span class="skolem"><span>b'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100117..100121"><span>less</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b'</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.card_wf_branch_ub|fact"><span>card_wf_branch_ub</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100507..100511"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99874..99880"><span>card_ub_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.diff_less_mono2|fact"><span>diff_less_mono2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_less_le_trans|fact"><span>order_less_le_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100126..100130"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.psubset_card_mono|fact"><span>psubset_card_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span>
        </span><span class="skolem"><span>b'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.lexpands|const"><span>lexpands</span></a><span> </span><span class="skolem"><span>b'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
        </span><span class="skolem"><span>bs'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat|const"><span>lin_sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands|const"><span>bexpands</span></a><span> </span><span class="skolem"><span>bs'</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
                  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>bs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset|const"><span>⊂</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lin_sat_def|fact"><span>lin_sat_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_strict_mono|fact"><span>bexpands_strict_mono</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_nonempty|fact"><span>bexpands_nonempty</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.lattice_class.inf_sup_aci|fact"><span>inf_sup_aci</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.psubsetI|fact"><span>psubsetI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_append|fact"><span>set_append</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_ge1|fact"><span>sup_ge1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100131..100136"><span>less'</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.domintros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_100131..100136"><span>less'</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.domintros</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bexpands_strict_mono|fact"><span>bexpands_strict_mono</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>,</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.domintros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat_def|fact"><span>sat_def</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_def_raw|axiom"><span class="entity_def" id="offset_101722..101732">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc.cong|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc.cong|thm"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc|const"><span class="entity_def" id="offset_101733..101742">mlss_proc</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mlss_proc</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_101812..101817">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_complete|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_complete|thm"><span class="entity_def" id="offset_101818..101843">mlss_proc_branch_complete</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.branch|type"><span>branch</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99772..99805"><span>mlss_proc_branch_dom_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101812..101817"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101812..101817"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.pinduct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_102170..102171">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?b'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102170..102171"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_lexpands|fact"><span>wf_branch_lexpands</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102170..102171"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102170..102171"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102170..102171"><span>1</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_102658..102659">3</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102658..102659"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_102734..102736">b'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102658..102659"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_expandss|fact"><span>wf_branch_expandss</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102658..102659"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102734..102736"><span>b'</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_102658..102659"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>4</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.open_branch|locale"><span>open_branch</span></a><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last|const"><span>last</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bopen|const"><span>bopen</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_103296..103298">by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103296..103298"><span>coherence</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#Set_Proc.sat|const"><span>sat</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.last_in_set|fact"><span>last_in_set</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103296..103298"><span>wf_branch</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_not_Nil|fact"><span>wf_branch_not_Nil</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_103440..103445">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sound|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_branch_sound|thm"><span class="entity_def" id="offset_103446..103468">mlss_proc_branch_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99772..99805"><span>mlss_proc_branch_dom_if_wf_branch</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>b'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="bound"><span>b'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103440..103445"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.pinduct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_103829..103830">1</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?b'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103829..103830"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_lexpands|fact"><span>wf_branch_lexpands</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103829..103830"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.lexpands_sound|fact"><span>lexpands_sound</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b''</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b''</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="skolem"><span>b''</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103829..103830"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99170..99186"><span>lexpands_lexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_104275..104276">3</span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?bs'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bexpand</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_104275..104276"><span>3</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_104349..104353">have</span></span></span><span> </span><span class="entity_def" id="offset_104354..104366">wf_branch_b'</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch|const"><span>wf_branch</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_104349..104353"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.wf_branch_def|fact"><span>wf_branch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bexpands_sound|fact"><span>bexpands_sound</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_104275..104276"><span>3</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>M'</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_104275..104276"><span>3.IH</span></a><span>"</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Set_Proc.html#offset_99415..99431"><span>mlss_proc_branch</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_104354..104366"><span>wf_branch_b'</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b''</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?bs'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss|const"><span>expandss</span></a><span> </span><span class="skolem"><span>b''</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>b'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>ψ</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>b''</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>ψ</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.bclosed|const"><span>bclosed</span></a><span> </span><span class="skolem"><span>b''</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Set_Proc.html#offset_104275..104276"><span>3.hyps</span></a><span>"</span></span><span class="main"><span class="main"><span>(</span></span></span><span>2-4</span><span class="main"><span class="main"><span>,</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_104275..104276"><span>3</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99318..99334"><span>bexpands_bexpand</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss_trans|fact"><span>expandss_trans</span></a><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Set_Calculus.html#Set_Calculus.expandss.intros|fact"><span>expandss.intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_99394..99402"><span>mlss_proc_branch.psimps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#Set_Proc.bclosed_sound|fact"><span>bclosed_sound</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_105056..105063">theorem</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_complete|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_complete|thm"><span>mlss_proc_complete</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.pset_fm|type"><span>pset_fm</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101733..101742"><span>mlss_proc</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Typing_Defs.html#Typing_Defs.types|const"><span>⊢</span></a></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_105056..105063"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101818..101843"><span>mlss_proc_branch_complete</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101722..101732"><span>mlss_proc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_105312..105319">theorem</span></span></span><span> </span><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_sound|fact"><span class="entity_def" id="Set_Proc.mlss_proc.mlss_proc_sound|thm"><span>mlss_proc_sound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Logic.html#Logic.interp|const"><span>interp</span></a><span> </span><a class="entity_ref" href="Set_Semantics.html#Set_Semantics.I\&lt;^sub&gt;s\&lt;^sub&gt;a|const"><span>I<span class="hidden">⇩</span><sub>s</sub><span class="hidden">⇩</span><sub>a</sub></span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101733..101742"><span>mlss_proc</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_105312..105319"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Proc.html#offset_103446..103468"><span>mlss_proc_branch_sound</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>φ</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Set_Proc.html#offset_101722..101732"><span>mlss_proc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>